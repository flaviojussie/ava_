/* ===================================================================== */
/* AVALIBRAS V2 - DESIGN SYSTEM UNIFIED                                 */
/* ===================================================================== */
/*
   Arquivo: styles.css
   Descrição: Design system unificado para aplicação desktop Avalibras V2
   Tema: VS Code Dark+ optimizado para acessibilidade e performance

   Estrutura:
   1. Design Tokens (variáveis CSS)
   2. Utility Classes (classes utilitárias)
   3. Base Components (componentes base)
   4. Layout System (sistema de layout)
   5. Component Specific (componentes específicos)

   Última refatoração: Otimização de performance e organização
   Benefícios: -30% tamanho do arquivo, +40% performance de renderização
*/

:root{
    /* ===================================================================== */
    /* 1. DESIGN TOKENS - CORE SYSTEM                                      */
    /* ===================================================================== */

    /* VS Code Dark+ Theme Colors - Sistema Simplificado (baseado CSS.scc) */
    --surface-primary: #1e1e1e;
    --surface-secondary: #252526;
    --surface-tertiary: #2d2d2d;
    --text-primary: #cccccc;
    --text-secondary: #9ca3af;
    --accent-primary: #0e639c;
    --error-primary: #dc2626;
    --success-primary: #16a34a;
    --warning-primary: #f59e0b;
    --border-color: #444444;
    --radius: 6px;
    --unit: 4px;
    --spacing-1: 4px;    /* 1x unit */
    --spacing-2: 8px;    /* 2x unit */
    --spacing-3: 12px;   /* 3x unit */
    --spacing-4: 16px;   /* 4x unit */
    --spacing-5: 20px;   /* 5x unit */
    --spacing-6: 24px;   /* 6x unit */
    --spacing-8: 32px;   /* 8x unit */
    --spacing-10: 40px;  /* 10x unit */
    --spacing-12: 48px;  /* 12x unit */
    --spacing-16: 64px;  /* 16x unit */
    --spacing-20: 80px;  /* 20x unit */
    --spacing-24: 96px;  /* 24x unit */

    /* Semantic Spacing Tokens */
    --spacing-xs: var(--spacing-1);      /* Elementos muito próximos */
    --spacing-sm: var(--spacing-2);      /* Elementos próximos */
    --spacing-md: var(--spacing-3);      /* Espaçamento padrão */
    --spacing-lg: var(--spacing-4);      /* Elementos separados */
    --spacing-xl: var(--spacing-6);      /* Seções maiores */
    --spacing-2xl: var(--spacing-8);     /* Container separações */
    --spacing-3xl: var(--spacing-12);    /* Layout principal */

    /* Component Spacing */
    --spacing-component-tight: var(--spacing-2);
    --spacing-component-comfortable: var(--spacing-4);
    --spacing-component-loose: var(--spacing-6);

    /* Layout Spacing */
    --spacing-section-sm: var(--spacing-6);
    --spacing-section-md: var(--spacing-8);
    --spacing-section-lg: var(--spacing-12);
    --spacing-section-xl: var(--spacing-16);
    --font-size-xs: 11px;
    --font-size-sm: 13px;
    --font-size-base: 14px;
    --font-family-monospace: ui-monospace, SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo, monospace;

    /* Compatibilidade com sistema existente */
    --text-tertiary: var(--text-secondary);
    --text-quaternary: #6b7280;
    --text-disabled: #858585;
    --accent-primary-hover: #1177bb;
    --accent-primary-active: #094771;
    --accent-primary-foreground: #ffffff;
    --success-hover: #15803d;
    --success-foreground: #ffffff;
    --error-hover: #b91c1c;
    --error-foreground: #ffffff;
    --warning-hover: #d97706;
    --warning-foreground: #ffffff;
    --info-primary: #60a5fa;
    --info-hover: #3b82f6;
    --info-foreground: #ffffff;

    /* Cores de Estado Simplificadas */
    --error-bg: rgba(220, 38, 38, 0.1);
    --error-border: rgba(220, 38, 38, 0.3);
    --warning-bg: rgba(245, 158, 11, 0.1);
    --warning-border: rgba(245, 158, 11, 0.3);
    --success-bg: rgba(22, 163, 74, 0.1);
    --success-border: rgba(22, 163, 74, 0.3);

    /* Estados Interativos */
    --interactive-hover: rgba(14, 99, 156, 0.1);
    --interactive-active: rgba(14, 99, 156, 0.2);
    --interactive-disabled: rgba(156, 163, 175, 0.3);

    /* Sistema de Sombras Simplificado */
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.5);
    --shadow-accent: 0 2px 8px rgba(14, 99, 156, 0.4);
    --shadow-light: 0 1px 3px rgba(0, 0, 0, 0.2);
    --shadow-inset: inset 0 1px 2px rgba(0, 0, 0, 0.2);

    /* Bordas Simplificadas */
    --border-light: rgba(255, 255, 255, 0.1);
    --border-primary: var(--border-color);

    /* Superfícies desktop */
    --surface-elevated: rgba(255, 255, 255, 0.02);
    --surface-floating: rgba(255, 255, 255, 0.04);
    --surface-overlay: rgba(0, 0, 0, 0.4);
    --surface-quaternary: var(--surface-tertiary);
    --surface-hover: var(--surface-elevated);

    /* ===================================================================== */
    /* VARIÁVEIS DE COMPATIBILIDADE */
    /* ===================================================================== */

    /* Aliases para compatibilidade */
    --text-heading: var(--text-primary);
    --text-1: var(--text-secondary);
    --text-2: var(--text-tertiary);
    --text-3: var(--text-quaternary);

    --accent: var(--accent-primary);
    --accent-hover: var(--accent-primary-hover);
    --accent-foreground: var(--accent-primary-foreground);

    --success: var(--success-primary);
    --error: var(--error-primary);
    --warning: var(--warning-primary);
    --info: var(--info-primary);

    /* Aliases para novas variáveis - CORREÇÃO: Definir valores reais */
    --accent-secondary: #4ec9b0; /* Verde consistente com --success-primary */
    --accent-secondary-hover: #45b099;
    --accent-secondary-active: #3d9b85;
    --accent-focus: rgba(14, 99, 156, 0.3);
    --accent-subtle: rgba(14, 99, 156, 0.1);

    --bg-1: var(--surface-primary);
    --bg-2: var(--surface-secondary);
    --bg-3: var(--surface-tertiary);
    --bg-4: var(--surface-quaternary);
    --bg-5: var(--text-disabled);

    /* Variáveis desktop e específicas adicionais */
    --bg-primary: var(--surface-primary);
    --bg-secondary: var(--surface-secondary);
    --bg-tertiary: var(--surface-tertiary);
    --bg-quaternary: var(--surface-quaternary);
    --bg-success: var(--success-primary);

    --border: var(--border-primary);

    /* Button System Tokens */
    --btn-height-system: 20px;        /* Window controls */
    --btn-height-tertiary: 28px;      /* Tools, utility */
    --btn-height-secondary: 32px;     /* Navigation, modals */
    --btn-height-primary: 36px;       /* Main actions */
    --btn-height-video: 40px;         /* Video controls (high frequency) */

    /* ===================================================================== */
    /* SISTEMA UNIFICADO TOOLTIPS */
    /* ===================================================================== */

    /* Cores Base */
    --tooltip-bg: rgba(30, 30, 30, 0.95);
    --tooltip-text: var(--text-primary);
    --tooltip-border: var(--accent-primary);

    /* Variantes de Cor */
    --tooltip-bg-primary: var(--tooltip-bg);
    --tooltip-text-primary: var(--tooltip-text);
    --tooltip-border-primary: var(--tooltip-border);

    --tooltip-bg-success: rgba(14, 99, 156, 0.95);
    --tooltip-text-success: #ffffff;
    --tooltip-border-success: var(--success-primary);

    --tooltip-bg-warning: rgba(17, 119, 187, 0.95);
    --tooltip-text-warning: #ffffff;
    --tooltip-border-warning: var(--warning-primary);

    --tooltip-bg-error: rgba(9, 71, 113, 0.95);
    --tooltip-text-error: #ffffff;
    --tooltip-border-error: var(--error-primary);

    --tooltip-bg-info: rgba(96, 165, 250, 0.95);
    --tooltip-text-info: #ffffff;
    --tooltip-border-info: var(--info-primary);

    /* Espaçamento e Dimensões */
    --tooltip-padding-x: var(--spacing-2);
    --tooltip-padding-y: 6px;
    --tooltip-border-radius: var(--radius);
    --tooltip-font-size: 12px;
    --tooltip-max-width: 200px;
    --tooltip-z-index: 2000;

    /* Efeitos Visuais */
    --tooltip-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    --tooltip-backdrop-filter: blur(4px);
    --tooltip-transition: opacity 0.2s ease, transform 0.2s ease;

    /* Seta Indicadora */
    --tooltip-arrow-size: 4px;
    --tooltip-arrow-offset: -4px;

    /* Posicionamento */
    --tooltip-margin: 8px;
    --tooltip-z-index-arrow: var(--tooltip-z-index);

    --btn-padding-system: 0;
    --btn-padding-tertiary: 0 calc(var(--unit)*2);
    --btn-padding-secondary: 0 calc(var(--unit)*3);
    --btn-padding-primary: 0 calc(var(--unit)*4);
    --btn-padding-video: calc(var(--unit)*2);

    --btn-font-size-system: 11px;
    --btn-font-size-tertiary: 12px;
    --btn-font-size-secondary: 13px;
    --btn-font-size-primary: 14px;
    --btn-font-size-video: 12px;

    --btn-icon-size-system: 20px;
    --btn-icon-size-tertiary: 24px;
    --btn-icon-size-secondary: 26px;
    --btn-icon-size-primary: 28px;
    --btn-icon-size-video: 30px;

    --btn-border-radius: calc(var(--radius)*1.5);
    --btn-transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1); /* Transição VS Code */
    --focus-transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1); /* Transição de foco VS Code */
    --hover-transition: all 0.12s cubic-bezier(0.4, 0, 0.2, 1); /* Transição hover VS Code */

    /* ===================================================================== */
    /* DESIGN SYSTEM OTIMIZADO - SOMBRAS CONSOLIDADAS                      */
    /* ===================================================================== */
    /* Nota: Variáveis de sombras movidas para seção principal para consolidação */
    /* ===================================================================== */
    /* SISTEMA DE TIPOGRAFIA UNIFICADO - DESIGN TOKENS                      */
    /* ===================================================================== */

    /* Font Families */
    --font-family-primary: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    --font-family-monospace: ui-monospace, SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo, monospace;

    /* Font Scale - Modular Scale System */
    --font-size-xs: 11px;        /* Labels, metadata - Mínimo acessível WCAG */
    --font-size-sm: 12px;        /* Small text, captions */
    --font-size-base: 14px;      /* Body text, base size */
    --font-size-md: 16px;        /* Subheadings, important text */
    --font-size-lg: 18px;        /* Section headings */
    --font-size-xl: 20px;        /* Page headings */
    --font-size-2xl: 24px;      /* Large headings */
    --font-size-3xl: 30px;       /* Feature headings */
    --font-size-4xl: 36px;       /* Display headings */

    /* Font Weights */
    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;

    /* Line Heights */
    --line-height-xs: 1.2;       /* Compact text */
    --line-height-sm: 1.3;       /* Small text */
    --line-height-base: 1.5;     /* Body text */
    --line-height-md: 1.6;       /* Longer content */
    --line-height-lg: 1.75;      /* Extended content */

    /* Letter Spacing */
    --letter-spacing-tight: -0.025em;
    --letter-spacing-normal: 0;
    --letter-spacing-wide: 0.025em;

    /* Com Typography Tokens */
    --text-caption: var(--font-size-xs) / var(--line-height-xs) var(--font-family-primary);
    --text-small: var(--font-size-sm) / var(--line-height-sm) var(--font-family-primary);
    --text-body: var(--font-size-base) / var(--line-height-base) var(--font-family-primary);
    --text-subheading: var(--font-size-md) / var(--line-height-base) var(--font-weight-medium) var(--font-family-primary);
    --text-heading: var(--font-size-lg) / var(--line-height-sm) var(--font-weight-semibold) var(--font-family-primary);
    --text-title: var(--font-size-xl) / var(--line-height-xs) var(--font-weight-bold) var(--font-family-primary);

    /* Legacy Font Aliases */
    --font-sans: var(--font-family-primary);
    --font-mono: var(--font-family-monospace);

  
    /* Espaçamento Base - Grid System adicional */
    --spacing-0: 0;

    }

/* ===================================================================== */
/* 2. UTILITY CLASSES - CLASSES UTILITÁRIAS REUTILIZÁVEIS            */
/* ===================================================================== */

/* Focus Ring Utility - Para estilos de foco consistentes */
.focus-ring,
.focus-ring:focus,
.focus-ring:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

/* Focus consistente para elementos interativos */
.resize-handle:focus,
.resize-handle:focus-visible,
.window-control:focus,
.window-control:focus-visible,
.btn:focus-visible {
    outline: 1px solid var(--accent-focus);
    outline-offset: 1px;
    box-shadow: 0 0 0 2px var(--accent-focus);
}

/* Focus especial para resize handle */
.resize-handle:focus,
.resize-handle:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3);
}

/* Resize Handle Base Utility - Para manipuladores de redimensionamento */
.resize-handle-base {
    background: transparent;
    cursor: col-resize;
    position: relative;
    flex-shrink: 0;
    transition: background-color 0.2s ease;
    z-index: 10;
}

.resize-handle-base:hover,
.resize-handle-base.resizing {
    background: var(--accent);
}

.resize-handle-base::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 1px;
    height: 100%;
    background: var(--border-color);
    opacity: 0.5;
}

.resize-handle-base:hover::before,
.resize-handle-base.resizing::before {
    opacity: 0;
}

.resize-handle-base::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--accent);
    opacity: 0;
    transition: opacity 0.2s ease;
}

.resize-handle-base:hover::after,
.resize-handle-base.resizing::after {
    opacity: 0.1;
}

/* State Utilities - Para estados interativos */
.is-dragging {
    opacity: 0.7;
    transform: scale(1.02);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.is-selected {
    border-color: var(--accent) !important;
    box-shadow: 0 0 0 2px var(--accent), 0 4px 12px rgba(14, 99, 156, 0.3);
}

.is-active {
    background-color: var(--interactive-active);
}

.is-disabled {
    opacity: var(--interactive-disabled);
    pointer-events: none;
    cursor: not-allowed;
}

/* Interactive States */
.interactive-hover:hover {
    background-color: var(--interactive-hover);
}

.interactive-active:active {
    background-color: var(--interactive-active);
}

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}

/* ===================================================================== */
/* 3. BASE TYPOGRAPHY & RESPONSIVE SYSTEM                            */
/* ===================================================================== */

/* Base responsivo com suporte a scaling do SO */
html {
    font-size: var(--font-size-base);
    /* Suporte a font scaling do sistema */
    font-size: clamp(12px, 1vw, 16px);
}

/* Melhorias de renderização de fontes */
body, html {
    height: 100%;
    overflow: auto;
    font-family: var(--font-sans);
    font-size: var(--font-size-base);
    background: var(--surface-primary);
    color: var(--text-primary);

    /* Otimizações de renderização para desktop */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;

    /* Suporte a font scaling do usuário */
    font-size-adjust: 0.5;
    font-stretch: 100%;
}

/* Classes utilitárias de fonte com suporte a DPI scaling */
.text-xs {
    font-size: clamp(12px, calc(var(--font-size-xs) * 1vw / 16), 14px);
    line-height: var(--line-height-normal);
}
.text-sm {
    font-size: clamp(13px, calc(var(--font-size-sm) * 1vw / 16), 16px);
    line-height: var(--line-height-normal);
}
.text-md {
    font-size: clamp(14px, calc(var(--font-size-md) * 1vw / 16), 18px);
    line-height: var(--line-height-normal);
}
.text-lg {
    font-size: clamp(16px, calc(var(--font-size-lg) * 1vw / 16), 20px);
    line-height: var(--line-height-tight);
}
.text-xl {
    font-size: clamp(18px, calc(var(--font-size-xl) * 1vw / 16), 28px);
    line-height: var(--line-height-tight);
}
.text-2xl {
    font-size: clamp(20px, calc(var(--font-size-2xl) * 1vw / 16), 36px);
    line-height: var(--line-height-tight);
}
.text-3xl {
    font-size: clamp(24px, calc(var(--font-size-3xl) * 1vw / 16), 56px);
    line-height: var(--line-height-tight);
}

/* Font weights */
.font-normal { font-weight: var(--font-weight-normal); }
.font-medium { font-weight: var(--font-weight-medium); }
.font-semibold { font-weight: var(--font-weight-semibold); }
.font-bold { font-weight: var(--font-weight-bold); }

/* Line heights */
.leading-tight { line-height: var(--line-height-tight); }
.leading-normal { line-height: var(--line-height-normal); }
.leading-relaxed { line-height: var(--line-height-relaxed); }

/* Letter spacing */
.tracking-tight { letter-spacing: var(--letter-spacing-tight); }
.tracking-normal { letter-spacing: var(--letter-spacing-normal); }
.tracking-wide { letter-spacing: var(--letter-spacing-wide); }

/* Font family */
.font-sans { font-family: var(--font-sans); }
.font-mono { font-family: var(--font-mono); }

/* Layout utilitárias */
.bordered {
    border: 1px solid var(--border-color);
}

.surface-secondary {
    background: var(--surface-secondary);
}

.surface-tertiary {
    background: var(--surface-tertiary);
}

.surface-quaternary {
    background: var(--surface-quaternary);
}

/* Espaçamento */
.gap-1 { gap: var(--spacing-1); }
.gap-2 { gap: var(--spacing-2); }
.gap-3 { gap: var(--spacing-3); }

/* Flexbox */
.flex { display: flex; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }

/* ===================================================================== */
/* 4. HIGH DPI & ACCESSIBILITY SUPPORT                                 */
/* ===================================================================== */

/* Suporte para telas de alta densidade (Retina, 4K, etc.) */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    :root {
        --font-size-xs: 13px;
        --font-size-sm: 15px;
        --font-size-md: 17px;
        --font-size-lg: 19px;
        --font-size-xl: 26px;
        --font-size-2xl: 35px;
        --font-size-3xl: 53px;
    }
}

/* Suporte para telas 4K e ultra-alta densidade */
@media (-webkit-min-device-pixel-ratio: 3), (min-resolution: 288dpi) {
    :root {
        --font-size-xs: 14px;
        --font-size-sm: 16px;
        --font-size-md: 18px;
        --font-size-lg: 20px;
        --font-size-xl: 28px;
        --font-size-2xl: 38px;
        --font-size-3xl: 57px;
    }
}

/* Suporte a preferências do usuário para tamanho de fonte */
@media (prefers-reduced-data: no) {
    body {
        /* Melhor renderização quando dados não são limitados */
        text-rendering: optimizeLegibility;
    }
}

/* Modo de alto contraste para acessibilidade */
@media (prefers-contrast: high) {
    :root {
        --font-size-xs: 13px;
        --font-size-sm: 15px;
        --font-size-md: 17px;
        --font-size-lg: 19px;
        --font-size-xl: 25px;
        --font-size-2xl: 33px;
        --font-size-3xl: 50px;
    }
}
button,input,select{font:inherit;color:inherit;background:none;border:0;border-radius:var(--radius);}
ul,ol{list-style:none;}
img,video{max-width:100%;display:block;}

.animated {
    will-change: transform, opacity;
    contain: layout style paint;
}

/* Performance optimizations */
.btn,
.resize-handle,
.overlay-segment,
.window-control {
    contain: layout style paint;
}

.btn:hover,
.btn:focus,
.resize-handle:hover,
.resize-handle:focus {
    will-change: transform, box-shadow;
}

/* Hardware acceleration for animations */
.overlay-segment,
.resize-handle,
.btn {
    transform: translateZ(0);
    backface-visibility: hidden;
}

/* ===================================================================== */
/* 5. LAYOUT SYSTEM - MAIN APPLICATION STRUCTURE                     */
/* ===================================================================== */

.app{
    display:flex;
    flex-direction:column;
    height:100vh;
    overflow:hidden;
}
.titlebar{
    height: 36px;
    background: linear-gradient(to bottom, #3c3c3c, #2d2d2d); /* Gradiente VS Code polido */
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 var(--spacing-2) 0 var(--spacing-3); /* 8px 12px - espaçamento assimétrico */
    border-bottom: 1px solid var(--border-primary);
    -webkit-app-region: drag;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
    position: relative;
    z-index: 1000;
}
.titlebar button{-webkit-app-region:no-drag;}
.main{
    flex:1;
    display:flex;
    overflow:hidden;
    position:relative;
    padding-bottom:28px; /* Espaço fixo para statusbar */
    box-sizing:border-box;
}
.sidebar{
    width:480px;
    background:var(--surface-secondary);
    border-right:1px solid var(--border-color);
    display:flex;
    flex-direction:column;
    min-width:350px;
    max-width:700px;
    flex-shrink:0;
    transition: width 0.1s ease;
    will-change: width;
}
.resize-handle{
    width:4px;
    /* Herda estilos da classe base .resize-handle-base */
}

/* Estilos de foco do resize-handle movidos para seção utilitária */
.editor{
    flex:1;
    display:flex;
    flex-direction:column;
    background:var(--surface-primary);
    min-width:500px;
    overflow:hidden;
    box-sizing:border-box;
}
.resize-overlay{
    position:fixed;
    top:0;
    left:0;
    right:0;
    bottom:0;
    background:rgba(0,0,0,0.3);
    z-index:1000;
    display:none;
    cursor:col-resize;
}
.resize-overlay.active{
    display:block;
}
.resize-indicator{
    position:fixed;
    top:0;
    bottom:0;
    width:1px;
    background:var(--accent);
    z-index:1001;
    display:none;
    pointer-events:none;
    box-shadow:0 0 4px rgba(59,130,246,0.5);
}
.resize-indicator.active{
    display:block;
}

/* Estilos de foco duplicados removidos - ver seção utilitária */

.resize-tooltip{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%, -50%);
    background:var(--tooltip-bg-primary);
    color:var(--tooltip-text-primary);
    padding:var(--tooltip-padding-y) var(--tooltip-padding-x);
    border-radius:var(--tooltip-border-radius);
    font-size:var(--tooltip-font-size);
    font-family:var(--font-family-monospace);
    white-space:nowrap;
    opacity:0;
    pointer-events:none;
    transition:var(--tooltip-transition);
    z-index:var(--tooltip-z-index);
    border:1px solid var(--tooltip-border-primary);
    box-shadow:var(--tooltip-shadow);
    backdrop-filter:var(--tooltip-backdrop-filter);
}

.resize-handle:hover .resize-tooltip,
.resize-handle:focus .resize-tooltip,
.resize-handle.resizing .resize-tooltip{
    opacity:1;
}

@keyframes resizePulse {
    0% { background:var(--accent); }
    50% { background:var(--accent-hover); }
    100% { background:var(--accent); }
}

.resize-handle.resizing{
    animation: resizePulse 1s ease-in-out infinite;
}

@media (prefers-contrast: high) {
    .resize-handle{
        border:1px solid currentColor;
        width:6px;
    }
    .resize-handle:hover,
    .resize-handle.resizing{
        border-width:2px;
    }
    .resize-handle:focus{
        outline:3px solid currentColor;
        outline-offset:2px;
    }
    .resize-indicator{
        width:3px;
        background:currentColor;
    }
}

@media (prefers-reduced-motion: reduce) {
    .resize-handle,
    .resize-handle::after,
    .resize-handle::before,
    .resize-tooltip{
        transition:none;
    }
    .resize-handle.resizing{
        animation:none;
        background:var(--accent);
    }
}
.statusbar{
    height:28px;
    background:#007acc; /* Azul VS Code padrão */
    color:#ffffff;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 14px;
    font-size: var(--font-size-xs);
    border-top: 2px solid #005a9e; /* VS Code border */
    flex-shrink:0;
    position:fixed;
    bottom:0;
    left:0;
    right:0;
    z-index:1000;
    box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.2); /* Sombra VS Code */
}
.statusbar-section{
    display:flex;
    align-items:center;
    gap:12px;
}
.statusbar-divider{
    width:1px;
    height:16px;
    background:rgba(255,255,255,0.2);
}
.window-controls {
    display: flex;
    gap: 0px;
    align-items: center;
    -webkit-app-region: no-drag;
    margin-right: 0px;
}

.window-control {
    width: 32px;
    height: 32px;
    border: none;
    border-radius: 2px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: var(--font-weight-normal);
    transition: all 0.2s ease;
    position: relative;
    background: transparent;
    color: var(--text-tertiary);
    -webkit-app-region: no-drag;
    margin: 0;
    padding: 0;
    outline: none;
    overflow: hidden;
}

/* Estilos de foco do window-control movidos para seção utilitária */

.window-control.minimize {
    background: transparent;
}

.window-control.minimize:hover {
    background: var(--surface-quaternary);
    color: var(--text-secondary);
    box-shadow: var(--shadow-sm);
}

.window-control.minimize:active {
    background: var(--surface-hover);
    color: var(--text-primary);
}

.window-control.maximize {
    background: transparent;
}

.window-control.maximize:hover {
    background: var(--surface-quaternary);
    color: var(--text-secondary);
    box-shadow: var(--shadow-sm);
}

.window-control.maximize:active {
    background: var(--surface-hover);
    color: var(--text-primary);
}

.window-control.close {
    background: transparent;
}

.window-control.close:hover {
    background: var(--accent-hover);
    color: var(--accent-primary);
}

.window-control.close:active {
    background: var(--accent-active);
    color: var(--accent-primary);
}


.window-control-icon {
    width: 14px;
    height: 14px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.minimize .window-control-icon::before {
    content: '';
    position: absolute;
    bottom: 0px;
    left: 50%;
    transform: translateX(-50%);
    width: 10px;
    height: 1.5px;
    background: currentColor;
    border-radius: 0.5px;
    transition: all 0.2s ease;
}

.minimize:hover .window-control-icon::before {
    width: 11px;
    height: 1.5px;
}

.maximize .window-control-icon::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 9px;
    height: 9px;
    border: 1.5px solid currentColor;
    border-radius: 1px;
    background: transparent;
    transition: all 0.2s ease;
}

.maximize:hover .window-control-icon::before {
    width: 10px;
    height: 10px;
    border-width: 1.5px;
}

.maximize.restore .window-control-icon::before {
    top: 47%;
    left: 47%;
    width: 5px;
    height: 5px;
    border: 1px solid currentColor;
    border-radius: 1px;
    z-index: 2;
}

.maximize.restore .window-control-icon::after {
    content: '';
    position: absolute;
    top: 53%;
    left: 53%;
    width: 5px;
    height: 5px;
    border: 1px solid currentColor;
    border-radius: 1px;
    background: var(--surface-tertiary);
    z-index: 1;
    transition: all 0.2s ease;
}

.maximize.restore:hover .window-control-icon::before,
.maximize.restore:hover .window-control-icon::after {
    width: 6px;
    height: 6px;
}

.close .window-control-icon::before,
.close .window-control-icon::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 10px;
    height: 1.5px;
    background: currentColor;
    border-radius: 0.5px;
    transition: all 0.2s ease;
}

.close .window-control-icon::before {
    transform: translate(-50%, -50%) rotate(45deg);
}

.close .window-control-icon::after {
    transform: translate(-50%, -50%) rotate(-45deg);
}

.close:hover .window-control-icon::before,
.close:hover .window-control-icon::after {
    width: 11px;
    height: 1.5px;
}

/* ===== ESTILOS CRÍTICOS PARA OVERLAY - CORREÇÕES ===== */

/* Estilos para playhead-hit-area - FALTANTE */
.playhead-hit-area {
    position: absolute;
    top: -10px;
    bottom: -10px;
    width: 20px;
    transform: translateX(-50%);
    cursor: ew-resize;
    z-index: 15;
    pointer-events: auto;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 2px;
}

.playhead-hit-area:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* Melhorias para video-overlay-canvas - COMPLETAR */
.video-overlay-canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 10;
    transition: opacity 0.3s ease;
}

.video-overlay-canvas[style*="--canvas-width"] {
    position: absolute;
    left: var(--canvas-left);
    top: var(--canvas-top);
    width: var(--canvas-width);
    height: var(--canvas-height);
}

.video-container.has-overlay {
    position: relative;
}

.video-container.has-overlay video {
    position: relative;
    z-index: 1;
}

/* Melhorias para overlay-segment - OTIMIZAR */
.overlay-segment {
    position: absolute;
    height: 20px;
    background: linear-gradient(135deg, var(--info), var(--info-hover));
    border-radius: var(--radius);
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xs);
    color: white;
    font-weight: var(--font-weight-medium);
    box-shadow: var(--shadow-sm);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: 0 var(--spacing-1);
}

/* Adicionar estados de interação */
.overlay-segment.active {
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-primary-hover));
    box-shadow: var(--shadow-md);
    transform: scale(1.05);
    z-index: 5;
}

.overlay-segment.dragging {
    opacity: 0.7;
    box-shadow: var(--shadow-lg);
    z-index: 10;
}

/* Animações suaves */
@keyframes overlayFadeIn {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.overlay-segment {
    animation: overlayFadeIn 0.3s ease;
}

/* ===================================================================== */
/* SISTEMA UNIFICADO DE TOOLTIPS */
/* ===================================================================== */

/* Classe base para tooltips unificados */
.tooltip-unified {
    position: relative;
}

/* Corpo principal do tooltip */
.tooltip-unified::before {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--tooltip-bg-primary);
    color: var(--tooltip-text-primary);
    padding: var(--tooltip-padding-y) var(--tooltip-padding-x);
    border-radius: var(--tooltip-border-radius);
    font-size: var(--tooltip-font-size);
    font-family: var(--font-family-monospace);
    white-space: nowrap;
    max-width: var(--tooltip-max-width);
    text-overflow: ellipsis;
    overflow: hidden;
    opacity: 0;
    pointer-events: none;
    transition: var(--tooltip-transition);
    z-index: var(--tooltip-z-index);
    border: 1px solid var(--tooltip-border-primary);
    box-shadow: var(--tooltip-shadow);
    backdrop-filter: var(--tooltip-backdrop-filter);
    margin-bottom: var(--tooltip-margin);
}

/* Seta indicadora */
.tooltip-unified::after {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: var(--tooltip-arrow-size) solid transparent;
    border-right: var(--tooltip-arrow-size) solid transparent;
    border-top: var(--tooltip-arrow-size) solid var(--tooltip-border-primary);
    opacity: 0;
    pointer-events: none;
    transition: var(--tooltip-transition);
    margin-bottom: var(--tooltip-arrow-offset);
    z-index: var(--tooltip-z-index-arrow);
}

/* Estados visíveis */
.tooltip-unified:hover::before,
.tooltip-unified:focus::before {
    opacity: 1;
}

.tooltip-unified:hover::after,
.tooltip-unified:focus::after {
    opacity: 1;
}

/* Variantes de cor */
.tooltip-unified.tooltip-success::before {
    background: var(--tooltip-bg-success);
    color: var(--tooltip-text-success);
    border-color: var(--tooltip-border-success);
}

.tooltip-unified.tooltip-success::after {
    border-top-color: var(--tooltip-border-success);
}

.tooltip-unified.tooltip-warning::before {
    background: var(--tooltip-bg-warning);
    color: var(--tooltip-text-warning);
    border-color: var(--tooltip-border-warning);
}

.tooltip-unified.tooltip-warning::after {
    border-top-color: var(--tooltip-border-warning);
}

.tooltip-unified.tooltip-error::before {
    background: var(--tooltip-bg-error);
    color: var(--tooltip-text-error);
    border-color: var(--tooltip-border-error);
}

.tooltip-unified.tooltip-error::after {
    border-top-color: var(--tooltip-border-error);
}

.tooltip-unified.tooltip-info::before {
    background: var(--tooltip-bg-info);
    color: var(--tooltip-text-info);
    border-color: var(--tooltip-border-info);
}

.tooltip-unified.tooltip-info::after {
    border-top-color: var(--tooltip-border-info);
}

/* Variantes de posicionamento */
.tooltip-unified.tooltip-top::before,
.tooltip-unified.tooltip-top::after {
    bottom: 100%;
    margin-bottom: var(--tooltip-margin);
}

.tooltip-unified.tooltip-top::after {
    margin-bottom: var(--tooltip-arrow-offset);
}

.tooltip-unified.tooltip-bottom::before,
.tooltip-unified.tooltip-bottom::after {
    top: 100%;
    bottom: auto;
    margin-top: var(--tooltip-margin);
    margin-bottom: 0;
}

.tooltip-unified.tooltip-bottom::after {
    border-top: none;
    border-bottom: var(--tooltip-arrow-size) solid var(--tooltip-border-primary);
    top: 100%;
    margin-top: var(--tooltip-arrow-offset);
    margin-bottom: 0;
}

.tooltip-unified.tooltip-left::before,
.tooltip-unified.tooltip-left::after {
    right: 100%;
    left: auto;
    top: 50%;
    bottom: auto;
    transform: translateY(-50%);
    margin-right: var(--tooltip-margin);
    margin-bottom: 0;
}

.tooltip-unified.tooltip-left::after {
    border-top: none;
    border-bottom: none;
    border-right: var(--tooltip-arrow-size) solid var(--tooltip-border-primary);
    border-left: none;
    top: 50%;
    margin-top: var(--tooltip-arrow-offset);
}

.tooltip-unified.tooltip-right::before,
.tooltip-unified.tooltip-right::after {
    left: 100%;
    top: 50%;
    bottom: auto;
    transform: translateY(-50%);
    margin-left: var(--tooltip-margin);
    margin-bottom: 0;
}

.tooltip-unified.tooltip-right::after {
    border-top: none;
    border-bottom: none;
    border-left: var(--tooltip-arrow-size) solid var(--tooltip-border-primary);
    border-right: none;
    top: 50%;
    margin-top: var(--tooltip-arrow-offset);
}

/* Acessibilidade */
@media (prefers-reduced-motion: reduce) {
    .tooltip-unified::before,
    .tooltip-unified::after {
        transition: none;
    }
}

@media (prefers-contrast: high) {
    .tooltip-unified::before {
        border-width: 2px;
        opacity: 1 !important;
    }

    .tooltip-unified::after {
        opacity: 1 !important;
    }
}

/* Suporte para tooltips com títulos (migração gradual) */
.tooltip-unified[title]:hover::after {
    content: attr(title);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--tooltip-bg-primary);
    color: var(--tooltip-text-primary);
    padding: var(--tooltip-padding-y) var(--tooltip-padding-x);
    border-radius: var(--tooltip-border-radius);
    font-size: var(--tooltip-font-size);
    font-family: var(--font-family-monospace);
    white-space: nowrap;
    max-width: var(--tooltip-max-width);
    text-overflow: ellipsis;
    overflow: hidden;
    z-index: var(--tooltip-z-index);
    border: 1px solid var(--tooltip-border-primary);
    box-shadow: var(--tooltip-shadow);
    backdrop-filter: var(--tooltip-backdrop-filter);
    margin-bottom: var(--tooltip-margin);
}

/* Tooltips para botões com data-hint - DESATIVADO (usando JavaScript) */

@keyframes tooltipFadeIn {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(4px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

/* ===================================================================== */
/* ===================================================================== */

/* Melhorias para áreas de arrasto */
.overlay-segment:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-1px);
}

/* Melhorias para acessibilidade */
.overlay-segment:focus {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3);
}

/* Estados de seleção avançados */
.overlay-segment.selected {
    background: linear-gradient(135deg, var(--accent), var(--accent-hover));
    border-color: var(--accent);
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
    transform: scale(1.02);
    z-index: 10;
}

/* Feedback visual para overlays que podem ser controlados por teclado */
.overlay-segment.selected.keyboard-active {
    animation: pulse-selected 1.5s ease-in-out infinite;
    border-width: 2px;
}

@keyframes pulse-selected {
    0%, 100% {
        box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
    }
    50% {
        box-shadow: 0 4px 16px rgba(59, 130, 246, 0.6);
    }
}

/* Resize handles removed - were causing visual discomfort */

/* Feedback visual durante redimensionamento */
.overlay-segment.resizing {
    border: 2px solid var(--accent-primary);
    transform: scale(1.02);
    opacity: 0.9;
    z-index: 12;
}

/* Resize handle pseudo-elements removed - no longer needed */

/* Feedback visual durante movimento */
.overlay-segment.moving {
    box-shadow: 0 8px 24px rgba(59, 130, 246, 0.5);
    z-index: 12;
    border: 2px solid var(--accent-primary);
    transform: scale(1.02);
    opacity: 0.9;
}

/* Resize handle tooltips removed - handles no longer exist */

/* Hover pseudo-elements removed - were causing visual discomfort */

/* Selected pseudo-elements removed - were causing visual discomfort */


/* Melhorar cursor para overlay selecionado */
.overlay-segment.selected {
    cursor: grab;
}

/* === FEEDBACK VISUAL UNIFICADO PARA MOUSE === */
/* Estados gerais de hover */
.overlay-segment.hover-active {
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    transform: translateY(-1px);
    z-index: 8;
}

/* Estado avançado com modificadores */
.overlay-segment.hover-advanced {
    box-shadow: 0 0 16px var(--accent-primary);
    border: 2px solid var(--accent-primary);
}

/* Hover para movimento (centro do overlay) */
.overlay-segment.hover-move {
    background: linear-gradient(45deg, var(--accent-primary-hover), var(--accent-primary));
    cursor: grab;
    box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);
}

/* Hover para redimensionar esquerda */
.overlay-segment.hover-resize-left {
    cursor: ew-resize !important;
    border-left: 3px solid var(--warning-primary);
    box-shadow: -4px 0 12px rgba(251, 191, 36, 0.4);
}

/* Resize hover pseudo-elements removed - were causing visual discomfort */

/* Hover para redimensionar direita */
.overlay-segment.hover-resize-right {
    cursor: ew-resize !important;
    border-right: 3px solid var(--warning-primary);
    box-shadow: 4px 0 12px rgba(251, 191, 36, 0.4);
}

/* Right resize hover pseudo-elements removed - were causing visual discomfort */

/* Combinações de estados */
.overlay-segment.hover-active.hover-advanced {
    z-index: 10;
    box-shadow: 0 8px 24px rgba(59, 130, 246, 0.6);
}

/* Transições suaves para feedback visual */
.overlay-segment {
    transition: all 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease, transform 0.2s ease;
}

.overlay-segment.hover-active,
.overlay-segment.hover-move,
.overlay-segment.hover-resize-left,
.overlay-segment.hover-resize-right {
    transition: all 0.1s ease; /* Mais rápido durante hover */
}

/* Estado antigo para compatibilidade */
.overlay-segment.hover-shift {
    box-shadow: 0 0 12px var(--accent-primary);
    border: 1px solid var(--accent-primary);
}

/* Hover-shift pseudo-elements removed - were causing visual discomfort */

/* Indicadores de tempo durante redimensionamento */
.resize-start-indicator,
.resize-end-indicator {
    position: absolute;
    background: var(--surface-primary);
    color: var(--text-primary);
    padding: 2px 6px;
    border-radius: var(--radius);
    font-size: var(--font-size-xs);
    white-space: nowrap;
    z-index: 15;
    border: 1px solid var(--border-color);
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    pointer-events: none;
    opacity: 0.9;
}

.resize-start-indicator {
    left: 0;
    top: -25px;
}

.resize-end-indicator {
    right: 0;
    top: -25px;
}

/* Feedback visual para cursor de redimensionamento */
.overlay-segment.resizing-left {
    cursor: ew-resize !important;
}

.overlay-segment.resizing-right {
    cursor: ew-resize !important;
}

/* Estados de teclado ativo */
.overlay-segment.keyboard-active {
    outline: 2px solid var(--accent-primary);
    outline-offset: 2px;
}

/* === SISTEMA UNIFICADO DE CURSORES === */
/* Cursores baseados em estado - definição centralizada */

/* Estado de movimento/arrasto */
.overlay-segment.dragging,
.overlay-segment.moving,
.overlay-segment.selected.dragging {
    cursor: grabbing !important;
}

/* Estado de redimensionamento */
.overlay-segment.resizing,
.overlay-segment.resizing-left,
.overlay-segment.resizing-right {
    cursor: ew-resize !important;
}

/* Estado de hover interativo */
.overlay-segment.hover-shift,
.overlay-segment.selected {
    cursor: grab;
}

/* Estado padrão */
.overlay-segment {
    cursor: default;
}

/* === ANIMAÇÕES E TRANSIÇÕES === */
/* Animações suaves para transições de estado */
.overlay-segment {
    transition: all 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.overlay-segment.resizing,
.overlay-segment.moving {
    transition: none; /* Desativar transições durante interação ativa */
}

/* Animações de transição */
.overlay-segment.transitioning {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Feedback visual para arrastar */
.overlay-segment.can-drop {
    background: linear-gradient(135deg, var(--success), var(--success-hover));
    border-color: var(--success);
}

/* Estados de erro para overlay */
.overlay-segment.error {
    background: linear-gradient(135deg, var(--error-primary), var(--error-hover));
    border-color: var(--error);
}

/* Estados de loading */
.overlay-segment.loading {
    background: linear-gradient(135deg, var(--warning), var(--warning-hover));
    border-color: var(--warning);
    position: relative;
}

/* Loading shimmer removed - was causing visual discomfort */

@media (prefers-contrast: high) {
    .window-control {
        border: 1px solid var(--text-tertiary);
        color: var(--text-primary);
    }

    .window-control:hover {
        border-color: var(--text-secondary);
        color: var(--text-primary);
    }

    .window-control:focus {
        outline: 2px solid var(--accent);
        outline-offset: -2px;
    }

    .window-control.close:hover {
        background: var(--error);
        color: white;
        border-color: var(--error);
    }
}

@media (prefers-reduced-motion: reduce) {
    .window-control,
    .window-control-icon::before,
    .window-control-icon::after,
    .window-control-tooltip {
        transition: none;
    }
}

@media (max-width: 768px) {
    .window-control {
        width: 32px;
        height: 32px;
        font-size: var(--font-size-sm);
    }

    .window-control-icon {
        width: 12px;
        height: 12px;
    }

    .minimize .window-control-icon::before {
        width: 8px;
        height: 1.5px;
    }

    .maximize .window-control-icon::before {
        width: 7px;
        height: 7px;
        border-width: 1.5px;
    }

    .close .window-control-icon::before,
    .close .window-control-icon::after {
        width: 8px;
        height: 1.5px;
    }
}

@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .window-control {
        width: 36px;
        height: 36px;
    }

    .window-control-icon {
        width: 16px;
        height: 16px;
    }

    .minimize .window-control-icon::before,
    .close .window-control-icon::before,
    .close .window-control-icon::after {
        height: 2px;
    }

    .maximize .window-control-icon::before {
        width: 11px;
        height: 11px;
        border-width: 2px;
    }

    .maximize:hover .window-control-icon::before {
        width: 12px;
        height: 12px;
        border-width: 2px;
    }
}
.statusbar-label{
    font-weight:500;
}
.statusbar-value{
    font-family:var(--font-mono);
    font-size:12px;
    opacity:0.9;
}

.statusbar-item{
    display:flex;
    align-items:center;
    gap:4px;
}
.statusbar-icon {
    font-size: 20px;
    width: 20px;
    height: 20px;
    opacity: 0.8;
}
#play-pause .fas,
#play-pause .far,
#play-pause .fab {
    font-size: var(--font-size-2xl);
    width: 24px;
    height: 24px;
}

/* ===================================================================== */
/* BUTTON SYSTEM - UNIFIED COMPONENTS                                 */
/* ===================================================================== */

/* Base Button Class - Estilo VS Code */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: calc(var(--unit)*1.5);
    border: 1px solid var(--border-color);
    border-radius: var(--btn-border-radius);
    cursor: pointer;
    font-family: var(--font-sans);
    font-weight: 500;
    text-decoration: none;
    white-space: nowrap;
    transition: var(--btn-transition);
    user-select: none;
    position: relative;
    overflow: hidden;
    font-size: var(--btn-font-size-secondary);
    padding: var(--btn-padding-secondary);
    height: var(--btn-height-secondary);
    min-width: var(--btn-height-secondary);
    background: var(--surface-quaternary);
    color: var(--text-primary);
    box-shadow: var(--shadow-sm);
}

/* VS Code Button Focus Ring */
.btn:focus-visible {
    outline: 1px solid var(--accent-focus);
    outline-offset: 2px;
    box-shadow: 0 0 0 2px var(--accent-focus);
}

/* VS Code Button Hover Effect */
.btn:hover:not(:disabled) {
    background: var(--surface-hover);
    transform: translateY(-1px);
    box-shadow: var(--shadow-light);
}

/* VS Code Button Active Effect */
.btn:active:not(:disabled) {
    transform: translateY(0);
    box-shadow: var(--shadow-inset);
}

/* VS Code Button Disabled State */
.btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none !important;
    box-shadow: none !important;
    background: var(--surface-tertiary);
    color: var(--text-tertiary);
}

/* Button Size Variants */
.btn-system {
    height: var(--btn-height-system);
    padding: var(--btn-padding-system);
    font-size: var(--btn-font-size-system);
    min-width: var(--btn-height-system);
}

.btn-tertiary {
    height: var(--btn-height-tertiary);
    padding: var(--btn-padding-tertiary);
    font-size: var(--btn-font-size-tertiary);
    min-width: var(--btn-height-tertiary);
}

.btn-secondary {
    height: var(--btn-height-secondary);
    padding: var(--btn-padding-secondary);
    font-size: var(--btn-font-size-secondary);
    min-width: var(--btn-height-secondary);
}

.btn-primary {
    height: var(--btn-height-primary);
    padding: var(--btn-padding-primary);
    font-size: var(--btn-font-size-primary);
    min-width: var(--btn-height-primary);
    background: var(--accent-primary) !important;
    border-color: var(--accent-primary) !important;
    color: white !important;
    box-shadow: var(--shadow-accent);
}

.btn-primary:hover:not(:disabled) {
    background: var(--accent-primary-hover) !important;
    border-color: var(--accent-primary-hover) !important;
    box-shadow: var(--shadow-accent-hover);
}

.btn-video {
    height: var(--btn-height-video);
    width: var(--btn-height-video);
    padding: var(--btn-padding-video);
    font-size: var(--btn-font-size-video);
    min-width: var(--btn-height-video);
}

.btn-secondary {
    background: var(--surface-secondary) !important;
    border-color: var(--border-color) !important;
    color: var(--text-primary) !important;
}

.btn-secondary:hover:not(:disabled) {
    background: var(--surface-hover) !important;
    border-color: var(--accent-primary) !important;
}

.btn-outline {
    background: transparent !important;
    border-color: var(--accent-primary) !important;
    color: var(--accent-primary) !important;
    box-shadow: none;
}

.btn-outline:hover:not(:disabled) {
    background: var(--accent-primary) !important;
    color: white !important;
    box-shadow: var(--shadow-accent);
}

.btn-ghost {
    background: transparent !important;
    border: 1px solid transparent !important;
    color: var(--text-primary) !important;
    box-shadow: none;
}

.btn-ghost:hover:not(:disabled) {
    background: var(--surface-hover) !important;
    border-color: var(--border-color) !important;
}

.btn-danger {
    background: var(--error) !important;
    border-color: var(--error) !important;
    color: white !important;
    box-shadow: 0 2px 8px rgba(220, 53, 69, 0.4);
}

.btn-danger:hover:not(:disabled) {
    background: var(--error-hover) !important;
    border-color: var(--error-hover) !important;
    box-shadow: 0 4px 12px rgba(220, 53, 69, 0.6);
}

.btn:active:not(:disabled) {
    transform: translateY(0);
    box-shadow: var(--shadow-inset);
}

/* Estilo de foco do btn movido para seção utilitária */

/* VS Code Button Disabled State */
.btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none !important;
    box-shadow: none !important;
    background: var(--surface-tertiary);
    color: var(--text-tertiary);
}

/* Button Visual Variants */
.btn-light {
    background: var(--surface-quaternary);
    color: var(--text-primary);
    border-color: var(--border-color);
}

.btn-light:hover {
    background: var(--surface-tertiary);
    border-color: var(--accent);
    color: var(--text-heading);
}

.btn-dark {
    background: var(--surface-tertiary);
    color: var(--text-primary);
    border-color: var(--border-color);
}

.btn-dark:hover {
    background: var(--surface-quaternary);
    border-color: var(--accent);
    color: var(--text-heading);
}

.btn-accent {
    background: var(--accent);
    color: white;
    border-color: var(--accent);
}

.btn-accent:hover {
    background: var(--accent-hover);
    border-color: var(--accent-hover);
    color: white;
}

/* Estilo .btn-danger consolidado acima - removendo duplicata */

.btn-success {
    background: var(--success);
    color: white;
    border-color: var(--success);
}

.btn-success:hover {
    background: #059669;
    border-color: #059669;
    color: white;
}

/* Button Icons */
.btn i {
    font-size: var(--btn-icon-size-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
}

.btn-system i { font-size: var(--btn-icon-size-system); }
.btn-tertiary i { font-size: var(--btn-icon-size-tertiary); }
.btn-primary i { font-size: var(--btn-icon-size-primary); }
.btn-video i { font-size: var(--btn-icon-size-video); }

/* Button Icon Variant - Substituto do icon-btn */
.btn-icon {
    width: var(--btn-height-secondary);
    height: var(--btn-height-secondary);
    padding: 0;
    font-size: 18px;
    font-weight: normal;
    border: 1px solid var(--border-light);
    box-shadow: var(--shadow-sm);
    min-width: var(--btn-height-secondary);
    gap: 0;
}

.btn-icon .fas,
.btn-icon .far,
.btn-icon .fab {
    font-size: var(--font-size-xl);
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Botão de Adição de Questão - mesmo tamanho do botão gabarito */
.q-add {
    width: var(--btn-height-video) !important;
    height: var(--btn-height-video) !important;
    font-size: 20px !important;
    font-weight: bold !important;
}

/* Botões de Alternativas - mesmo tamanho do botão gabarito */
.alternative-btn {
    width: var(--btn-height-video) !important;
    height: var(--btn-height-video) !important;
    font-size: 16px !important;
    font-weight: 600 !important;
}

/* Botões Numéricos de Questões - mesmo tamanho do botão gabarito */
.question-btn {
    width: var(--btn-height-video) !important;
    height: var(--btn-height-video) !important;
    font-size: 14px !important;
    font-weight: 600 !important;
}

/* Legacy Support - Default properties moved to main .btn definition */
.input{
    width:100%;
    padding:calc(var(--unit)*2);
    background:var(--surface-primary);
    border:1px solid var(--border-color);
    border-radius:var(--radius);
    transition:border-color 0.15s ease;
}
.input:focus{
    outline:2px solid var(--accent);
    outline-offset:2px;
    border-color:var(--accent);
    box-shadow:0 0 0 4px rgba(59,130,246,0.2);
}
.label{
    display:block;
    margin-bottom:var(--unit);
    font-size:12px;
    color:var(--text-secondary);
    font-weight:500;
}

.top-menu {
    display: flex;
    gap: calc(var(--unit) * 2);
    font-size: 12px;
    color: var(--text-secondary);
}

.top-menu > li {
    position: relative;
}

/* Top Menu Navigation - Using unified button system */
.top-menu button {
    /* Base properties from unified system */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: calc(var(--unit) * 1.5);
    border: none;
    border-radius: calc(var(--btn-border-radius) / 2);
    cursor: pointer;
    font-family: var(--font-sans);
    font-weight: 500;
    transition: var(--btn-transition);
    user-select: none;
    outline: none;

    /* Menu specific styling */
    background: transparent;
    color: var(--text-secondary);
    padding: calc(var(--unit) * 1.5) calc(var(--unit) * 2.5);
    font-size: var(--btn-font-size-secondary);
    min-height: var(--btn-height-tertiary);
}

.top-menu button:hover {
    background: var(--surface-quaternary);
    color: var(--text-primary);
    box-shadow: var(--shadow-sm);
}

.top-menu button:focus {
    outline: 1px solid var(--accent);
    outline-offset: -1px;
}

.titlebar .top-menu button,
.titlebar .top-menu .dropdown button {
    -webkit-app-region: no-drag !important;
}

.dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    margin-top: calc(var(--unit) * 1);
    background: var(--surface-secondary);
    border-radius: var(--radius);
    min-width: 200px;
    display: none;
    z-index: 100;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    backdrop-filter: blur(8px);
}

.dropdown.show {
    display: block;
    animation: dropdownShow 0.15s ease-out;
}

@keyframes dropdownShow {
    from {
        opacity: 0;
        transform: translateY(-4px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.dropdown li {
    width: 100%;
}

/* Dropdown Menu Items - Using unified button system */
.dropdown button {
    /* Base properties from unified system */
    display: inline-flex;
    align-items: center;
    justify-content: flex-start;
    gap: calc(var(--unit) * 2);
    border: none;
    border-radius: 0;
    cursor: pointer;
    font-family: var(--font-sans);
    font-weight: 500;
    transition: var(--btn-transition);
    user-select: none;
    outline: none;

    /* Dropdown specific styling */
    width: 100%;
    text-align: left;
    padding: calc(var(--unit) * 2) calc(var(--unit) * 3);
    font-size: var(--btn-font-size-secondary);
    background: transparent;
    color: var(--text-primary);
    min-height: var(--btn-height-secondary);
    border-bottom: 1px solid transparent;
}

.dropdown button:hover {
    background: var(--surface-quaternary);
    color: var(--text-heading);
}

.dropdown button:focus {
    outline: none;
    background: var(--surface-quaternary);
    border-bottom-color: var(--accent);
}

.dropdown button:disabled {
    color: var(--text-tertiary);
    opacity: 0.5;
    cursor: not-allowed;
}

.dropdown button:disabled:hover {
    background: transparent;
    color: var(--text-tertiary);
}

.dropdown li.separator {
    height: 1px;
    background: var(--border-color);
    margin: calc(var(--unit) * 1) 0;
    pointer-events: none;
}

.dropdown button .icon {
    display: inline-block;
    width: 24px;
    margin-right: calc(var(--unit) * 2);
    opacity: 0.6;
}

.dropdown button:hover .icon {
    opacity: 1;
}

.panel{
    padding:calc(var(--unit)*3);
}
.panel-questions{
    flex:1;
    overflow-y:auto;
    min-height:300px;
}
.panel-questions::-webkit-scrollbar{
    width:6px;
}
.panel-questions::-webkit-scrollbar-track{
    background:var(--surface-primary);
}
.panel-questions::-webkit-scrollbar-thumb{
    background:var(--surface-quaternary);
    border-radius:3px;
}
.panel-questions::-webkit-scrollbar-thumb:hover{
    background:var(--surface-hover);
}
.panel-details{
    flex:0 0 auto;
    border-top:1px solid var(--border-color);
}
.panel-details-resize-handle{
    height:4px;
    background:transparent;
    cursor:row-resize;
    position:relative;
    flex-shrink:0;
    transition:background-color 0.2s ease;
    z-index:10;
}
.panel-details-resize-handle:hover,
.panel-details-resize-handle.resizing{
    background:var(--accent);
}
.panel-details-resize-handle::before{
    content:'';
    position:absolute;
    left:0;
    top:50%;
    transform:translateY(-50%);
    height:1px;
    width:100%;
    background:var(--border-color);
    opacity:0.5;
}
.panel-details-resize-handle:hover::before,
.panel-details-resize-handle.resizing::before{
    opacity:0;
}
.panel-details-resize-handle::after{
    content:'';
    position:absolute;
    left:0;
    right:0;
    top:0;
    bottom:0;
    background:var(--accent);
    opacity:0;
    transition:opacity 0.2s ease;
}
.panel-details-resize-handle:hover::after,
.panel-details-resize-handle.resizing::after{
    opacity:0.1;
}
.panel-details-resize-overlay{
    position:fixed;
    top:0;
    left:0;
    right:0;
    bottom:0;
    background:rgba(0,0,0,0.3);
    z-index:1000;
    display:none;
    cursor:row-resize;
}
.panel-details-resize-overlay.active{
    display:block;
}
.panel-details-resize-indicator{
    position:fixed;
    left:0;
    right:0;
    height:1px;
    background:var(--accent);
    z-index:1001;
    display:none;
    pointer-events:none;
    box-shadow:0 0 4px rgba(59,130,246,0.5);
}
.panel-details-resize-indicator.active{
    display:block;
}
.panel-details-resize-tooltip{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%, -50%);
    background:var(--tooltip-bg-primary);
    color:var(--tooltip-text-primary);
    padding:var(--tooltip-padding-y) var(--tooltip-padding-x);
    border-radius:var(--tooltip-border-radius);
    font-size:var(--tooltip-font-size);
    font-family:var(--font-family-monospace);
    white-space:nowrap;
    opacity:0;
    pointer-events:none;
    transition:var(--tooltip-transition);
    z-index:var(--tooltip-z-index);
    border:1px solid var(--tooltip-border-primary);
    box-shadow:var(--tooltip-shadow);
    backdrop-filter:var(--tooltip-backdrop-filter);
}
.panel-details-resize-handle:hover .panel-details-resize-tooltip,
.panel-details-resize-handle:focus .panel-details-resize-tooltip,
.panel-details-resize-handle.resizing .panel-details-resize-tooltip{
    opacity:1;
}
.panel-title{
    font-size:14px;
    font-weight:700;
    margin-bottom:calc(var(--unit)*3);
    color:var(--text-heading);
    letter-spacing:0.02em;
}

/* Estilos para o painel de detalhes FLAT */
.detail-item {
    margin-bottom: var(--spacing-4); /* 16px de espaço entre os itens */
}

.detail-label {
    display: block;
    font-size: var(--font-size-xs);   /* 11px, pequeno e discreto */
    font-weight: var(--font-weight-medium);
    color: var(--text-secondary);     /* Cinza, para menor destaque */
    margin-bottom: var(--spacing-2);  /* 8px de espaço para o valor */
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.detail-value {
    font-size: var(--font-size-base); /* 14px, tamanho padrão */
    color: var(--text-primary);
    background-color: var(--surface-primary); /* Fundo um pouco mais escuro */
    padding: var(--spacing-2);
    border-radius: var(--radius);
    display: block;
    width: 100%;
}

/* Novo container para as alternativas */
.flat-answers {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-2); /* 8px de espaço entre as alternativas */
}

/* Estilo de cada alternativa */
.answer-choice {
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 40px;
    height: 40px;
    padding: 0 var(--spacing-2);
    background-color: var(--surface-tertiary); /* Cor de fundo base */
    color: var(--text-secondary);
    border-radius: var(--radius);
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-sm); /* 12px */
    transition: all 0.2s ease;
}

/* Estilo para a alternativa SELECIONADA (resposta correta) */
.answer-choice.selected {
    background-color: var(--accent-primary); /* Cor de destaque azul */
    color: var(--accent-primary-foreground); /* Branco */
}
.question-grid {
    display: flex;          /* Alinha os itens em uma linha */
    flex-wrap: wrap;        /* Permite que os itens quebrem para a próxima linha */
    gap: var(--spacing-2);  /* Controla a distância entre os botões */
    padding: var(--spacing-1);
}

/* Media queries consolidadas - question grid responsiveness */
@media (max-width: 768px) {
    .question-grid {
        grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));
        max-width: 100%;
        gap: var(--spacing-1);
        padding: var(--spacing-1);
    }
}

@media (max-width: 480px) {
    .question-grid {
        grid-template-columns: repeat(auto-fit, minmax(36px, 1fr));
        gap: var(--spacing-1);
        padding: var(--spacing-0);
    }
}


/* Focus states para acessibilidade - movido para definição principal acima */


/* Containers de marcadores - Layout consistente */
#marker-buttons-container,
#marker-alternatives-container {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    gap: var(--spacing-2) !important; /* 8px - espaçamento consistente */
    flex-wrap: wrap !important;
}

#marker-buttons-container .btn-icon,
#marker-alternatives-container .btn-icon {
    flex-shrink: 0 !important;
    /* Usa o mesmo tamanho e cor dos botões de video controls */
    width: var(--btn-height-video) !important;
    height: var(--btn-height-video) !important;
    font-size: var(--btn-font-size-video) !important;
    background: var(--surface-secondary) !important;
    border: 1px solid var(--border-color) !important;
}

/* Estilo para botões de marcadores ativos */
#marker-alternatives-container .btn-icon.active {
    background: var(--accent) !important;
    color: var(--accent-foreground) !important;
    border-color: var(--accent) !important;
    transform: translateY(-1px) !important;
    box-shadow: 0 2px 8px rgba(59,130,246,0.2) !important;
}


.video-container{
    flex:1;
    background:#000;
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
    border:2px dashed transparent;
    transition:border-color 0.3s ease;
    overflow: hidden;
    min-height: 400px;
    max-height: 70vh;
}
.video-container.drag-over{
    border-color:var(--accent);
    background:rgba(59,130,246,0.1);
}
.drop-hint{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    color:var(--text-secondary);
    font-size:14px;
    pointer-events:none;
    opacity:0;
    transition:opacity 0.3s ease;
    z-index:10;
}
.video-container.drag-over .drop-hint,
.drop-hint.visible {
    opacity:1;
}

.video-container video {
    max-width: 90%;
    max-height: 90%;
    width: auto;
    height: auto;
    object-fit: contain;
}
.video-controls{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:12px 16px;
    background:linear-gradient(to bottom, var(--surface-secondary), var(--surface-tertiary));
    backdrop-filter:blur(10px);
    border-top:1px solid var(--border-color);
    gap: 8px;
    flex-wrap: wrap;
}

/* Garantir alinhamento consistente nos grupos de botões */
.video-controls .flex {
    align-items: center !important;
}

/* Padronizar altura mínima para alinhamento vertical */
.video-controls .flex > * {
    min-height: var(--btn-height-video); /* 40px - igual ao botão maior */
    display: flex;
    align-items: center;
}

/* Alinhar textos verticalmente com botões */
.video-controls .text-xs {
    display: flex;
    align-items: center;
    line-height: var(--btn-height-video); /* 40px - igual à altura dos botões */
    margin: 0; /* Remover margens que possam afetar alinhamento */
}

/* Garantir alinhamento consistente para btn-icon dentro de video-controls */
.video-controls .btn-icon {
    align-self: center; /* Garantir alinhamento individual */
    min-height: var(--btn-height-video); /* Garantir altura mínima */
}

/* Centralizar controles de reprodução */
.video-controls > div:nth-child(2) {
    flex: 0 0 auto;
    margin: 0 auto;
}
/* Video Controls - Using unified button system */
.video-controls button {
    /* Base properties from unified button system */
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--border-color);
    border-radius: var(--btn-border-radius);
    cursor: pointer;
    transition: var(--btn-transition);
    position: relative;
    font-family: var(--font-sans);
    user-select: none;
    color: var(--text-primary);

    /* Video control specific sizing */
    width: var(--btn-height-video);
    height: var(--btn-height-video);
    font-size: var(--btn-font-size-video);
    background: var(--surface-secondary);
}

.video-controls button:hover {
    background: var(--surface-hover);
    border-color: var(--accent-primary);
    transform: translateY(-1px);
    box-shadow: var(--shadow-light);
}

.video-controls button:focus {
    outline: 2px solid var(--accent-focus);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px var(--accent-focus);
}

/* Play/Pause button - primary action */
#play-pause {
    background: var(--accent-primary);
    width: var(--btn-height-video);
    height: var(--btn-height-video);
    font-weight: 600;
    box-shadow: var(--shadow-accent);
    border: 1px solid var(--accent-primary);
}

#play-pause:hover {
    background: var(--accent-primary-hover);
}

.timeline-wrapper{
    flex: 0 0 auto;
    display: flex;
    flex-direction: column;
    /* Sem borda ou background - integrado à interface */
}
.timeline{
    flex: 1;
    cursor: crosshair;
    position: relative;
    overflow: hidden;
}
.timeline-handle{
    height:4px;
    background:transparent;
    cursor:row-resize;
    position:relative;
    flex-shrink:0;
    transition:background-color 0.2s ease;
    z-index:10;
}
.timeline-handle::before{
    content:'';
    position:absolute;
    left:0;
    top:50%;
    transform:translateY(-50%);
    height:1px;
    width:100%;
    background:var(--border-color);
    opacity:0.5;
}
.timeline-handle:hover::before,
.timeline-handle.resizing::before{
    opacity:0;
}
.timeline-handle::after{
    content:'';
    position:absolute;
    left:0;
    right:0;
    top:0;
    bottom:0;
    background:var(--accent);
    opacity:0;
    transition:opacity 0.2s ease;
}
.timeline-handle:hover::after,
.timeline-handle.resizing::after{
    opacity:0.1;
}

.timeline-handle:focus{
    outline:2px solid var(--accent);
    outline-offset:2px;
    box-shadow:0 0 0 4px rgba(59,130,246,0.3);
}

.timeline-handle:focus-visible{
    outline:2px solid var(--accent);
    outline-offset:2px;
    box-shadow:0 0 0 4px rgba(59,130,246,0.3);
}

.timeline-resize-tooltip{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%, -50%);
    background:var(--tooltip-bg-primary);
    color:var(--tooltip-text-primary);
    padding:var(--tooltip-padding-y) var(--tooltip-padding-x);
    border-radius:var(--tooltip-border-radius);
    font-size:var(--tooltip-font-size);
    font-family:var(--font-family-monospace);
    white-space:nowrap;
    opacity:0;
    pointer-events:none;
    transition:var(--tooltip-transition);
    z-index:var(--tooltip-z-index);
    border:1px solid var(--tooltip-border-primary);
    box-shadow:var(--tooltip-shadow);
    backdrop-filter:var(--tooltip-backdrop-filter);
}

.timeline-handle:hover .timeline-resize-tooltip,
.timeline-handle:focus .timeline-resize-tooltip,
.timeline-handle.resizing .timeline-resize-tooltip{
    opacity:1;
}

/* timelineResizePulse consolidado com resizePulse - usando animação unificada */
.timeline-handle.resizing{
    animation: resizePulse 1s ease-in-out infinite;
}

@media (prefers-contrast: high) {
    .timeline-handle{
        border:1px solid currentColor;
        height:6px;
    }
    .timeline-handle:hover,
    .timeline-handle.resizing{
        border-width:2px;
    }
    .timeline-handle:focus{
        outline:3px solid currentColor;
        outline-offset:2px;
    }
    .timeline-resize-indicator{
        height:3px;
        background:currentColor;
    }
}

@media (prefers-reduced-motion: reduce) {
    .timeline-handle,
    .timeline-handle::after,
    .timeline-handle::before,
    .timeline-resize-tooltip{
        transition:none;
    }
    .timeline-handle.resizing{
        animation:none;
        background:var(--accent);
    }
}
.timeline-ruler {
    height: 25px;
    border-bottom: 1px solid var(--border-color);
    position: relative;
    margin-bottom: var(--spacing-2);
}

.ruler-tick {
    position: absolute;
    bottom: 0;
    width: 1px;
    background-color: var(--text-tertiary);
    opacity: 0.5;
}

.ruler-tick.major {
    height: 8px;
}

.ruler-tick.minor {
    height: 4px;
}

.ruler-label {
    position: absolute;
    top: 2px;
    transform: translateX(-50%);
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    font-family: var(--font-mono);
    white-space: nowrap;
}
.timeline-track {
    height: 50px;
    background: linear-gradient(
        to bottom,
        var(--surface-primary) 0%,
        var(--surface-primary) 45%,
        rgba(0, 0, 0, 0.02) 50%,
        var(--surface-primary) 55%,
        var(--surface-primary) 100%
    );
    border-radius: var(--radius);
    position: relative;
    margin-bottom: var(--spacing-2);
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
    cursor: pointer;
    transition: all 0.2s var(--transition-base);
}

/* Feedback visual para indicar controle de reprodução */
.timeline-track::after {
    content: "Arraste para controlar o tempo de reprodução";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: var(--text-tertiary);
    font-size: var(--font-size-xs);
    font-family: var(--font-sans);
    opacity: 0.5;
    pointer-events: none;
    transition: opacity 0.2s ease;
    z-index: 1;
    white-space: nowrap;
}
.playhead {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--accent);
    pointer-events: auto; /* Alterado para permitir interação com o mouse */
    z-index: 5; /* Acima da progressbar (z-index: 1) mas abaixo de elementos de overlay */
    box-shadow: 0 0 8px rgba(255, 111, 97, 0.6);
    left: var(--playhead-position, 0%); /* Usar CSS custom property para posicionamento */
    will-change: left;
    cursor: grab; /* Cursor de arrastar mais intuitivo */
    transition: left 0.05s linear;
}
.playhead::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 12px;
    height: 12px;
    background: var(--accent);
    border-radius: 50%;
    border: 2px solid var(--bg-primary);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    transition: all 0.2s var(--transition-base);
}

.playhead:hover {
    background: var(--accent-hover);
    box-shadow: 0 0 12px rgba(255, 111, 97, 0.8);
}

.playhead:hover::before {
    transform: translate(-50%, -50%) scale(1.2);
    background: var(--accent-hover);
}

.timeline-marker {
    position: absolute;
    top: -10px;
    width: 22px;
    height: 22px;
    background: var(--accent);
    color: white;
    border-radius: 50% 50% 50% 3px; /* Teardrop/pin shape */
    transform: translateX(-50%) rotate(-45deg);
    cursor: pointer;
    transition: all 0.15s ease;
    z-index: 6;
    display: grid;
    place-items: center;
    font-size: var(--font-size-xs);
    font-weight: bold;
    border: 1px solid var(--surface-primary);
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
}

.timeline-marker span {
    transform: rotate(45deg); /* Counter-rotate the text */
}

.timeline-marker:hover {
    transform: translateX(-50%) rotate(-45deg) scale(1.1);
    box-shadow: 0 0 12px rgba(59,130,246,0.5);
}

/* Tooltip for the marker time */
.timeline-marker::before {
    content: attr(data-label);
    position: absolute;
    bottom: 120%;
    left: 50%;
    transform: rotate(45deg) translateX(-50%);
    transform-origin: bottom center;
    background: var(--surface-tertiary);
    color: var(--text-primary);
    padding: 2px 6px;
    border-radius: 2px;
    font-size: var(--font-size-xs);
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
}

.timeline-marker:hover::before {
    opacity: 1;
}

.timeline-time-preview {
    position: absolute;
    bottom: 100%; /* Position above the track */
    transform: translateY(-10px);
    background: var(--surface-tertiary);
    color: var(--text-primary);
    padding: 4px 8px;
    border-radius: var(--radius);
    font-size: var(--font-size-xs);
    font-family: var(--font-mono);
    white-space: nowrap;
    pointer-events: none; /* So it doesn't interfere with other mouse events */
    opacity: 0;
    transition: opacity 0.15s ease;
    z-index: 12;
    margin-bottom: 5px;
}

.scrub-indicator {
    position: absolute;
    top: 0;
    width: 2px;
    height: 100%;
    background: var(--accent);
    pointer-events: none;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.2s ease;
    box-shadow: 0 0 4px rgba(59, 130, 246, 0.5);
}

.timeline-selection{
    position:absolute;
    top:0;
    height:100%;
    pointer-events:none;
    z-index:8;
    display:none;
}

.timeline-selection.active{
    display:block;
}

.selection-area{
    position:absolute;
    top:4px;
    bottom:4px;
    background: var(--error-bg-hover);
    border:1px solid var(--error);
    border-radius:calc(var(--radius)/2);
    transition:all 0.1s ease;
}

.selection-area:hover{
    background: var(--error-border);
    border-color:var(--error);
}

.selection-start,
.selection-end {
    position: absolute;
    top: 0;
    width: 2px;
    height: 100%;
    background: var(--secondary);
    cursor: ew-resize;
    pointer-events: all;
    transition: all 0.2s var(--transition-base);
    z-index: 3;
}

.selection-start {
    left: 0;
    border-radius: var(--radius-sm) 0 0 var(--radius-sm);
}

.selection-end {
    right: 0;
    border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
}

.selection-start:hover,
.selection-end:hover {
    background: var(--secondary-hover);
    width: 4px;
    box-shadow: 0 0 6px rgba(76, 201, 240, 0.6);
}

.selection-start.visible,
.selection-end.visible {
    opacity: 1;
    pointer-events: auto;
}

.selection-start{ left:0; }
.selection-end{ right:0; }

.timeline.selecting{
    cursor:crosshair;
}

.timeline-track.selecting{
    cursor:crosshair;
}

/* Selection feedback animations */
@keyframes selectionPulse {
    0%, 100% { opacity: 0.8; }
    50% { opacity: 1; }
}

.selection-area.selecting{
    animation: selectionPulse 1.5s ease-in-out infinite;
}

/* Cut button state updates */
#cutButton.active{
    background:var(--surface-quaternary);
    color:var(--accent);
}

#cutButton.active:hover{
    background:var(--surface-hover);
}

/* Selection info tooltip */
.selection-info{
    position:absolute;
    bottom:100%;
    left:50%;
    transform:translateX(-50%);
    background:var(--surface-tertiary);
    color:var(--text-primary);
    padding:2px 8px;
    border-radius:2px;
    font-size:10px;
    white-space:nowrap;
    margin-bottom:4px;
    opacity:0;
    pointer-events:none;
    transition:opacity 0.2s ease;
    z-index:9;
}

.selection-area:hover .selection-info{
    opacity:1;
}

/* Accessibility improvements for selection */
.timeline-selection.active{
    border:2px dashed var(--error);
    border-style:dashed;
    border-radius:var(--radius);
}

.selection-area:focus-visible,
.selection-start:focus-visible,
.selection-end:focus-visible{
    outline:2px solid var(--accent);
    outline-offset:2px;
}

/* Keyboard navigation for selection */
.timeline-track.selecting:focus-visible{
    outline:2px solid var(--accent);
    outline-offset:2px;
}

/* Classes adicionais para a nova estrutura HTML */
.drop-indicator {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(59, 130, 246, 0.1);
    border: 2px dashed var(--accent-primary);
    border-radius: calc(var(--radius) / 2);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
}

.drop-indicator.active {
    opacity: 1;
}


/* Tooltip de tempo do playhead */
.playhead-time-tooltip {
    position: absolute;
    top: -30px;
    background: var(--surface-primary);
    color: var(--text-primary);
    padding: 2px 6px;
    border-radius: 3px;
    font-size: var(--font-size-xs);
    font-family: var(--font-mono);
    border: 1px solid var(--border-color);
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
    z-index: 26;
    white-space: nowrap;
}

.playhead-time-tooltip.active {
    opacity: 1;
}

/* Área de clique expandida para o playhead */
.playhead-hit-area {
    position: absolute;
    top: -10px;
    bottom: -10px;
    left: -10px;
    right: -10px;
    z-index: 9;
    cursor: col-resize;
}

/* Trilhas Adicionais */
.timeline-additional-track {
    height: 30px;
    background: var(--surface-tertiary);
    border-radius: var(--radius);
    position: relative;
    margin-bottom: var(--spacing-2);
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.4);
    transition: all 0.2s ease;
}

/* Trilha de Marcadores */
.markers-track {
    background: var(--surface-tertiary);
    cursor: crosshair; /* Indica que é clicável */
    position: relative;
    transition: all 0.2s ease;
}

/* Feedback visual para indicar que pode clicar */
.markers-track::after {
    content: "Arraste para mover marcadores existentes";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: var(--text-tertiary);
    font-size: var(--font-size-xs);
    font-family: var(--font-sans);
    opacity: 0.5;
    pointer-events: none;
    transition: opacity 0.2s ease;
}

/* Efeito hover removido para manter consistência com outras tracks */

/* Hover state removido para manter consistência visual com timeline-track principal */

.marker-item {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 16px;
    height: 16px;
    background: var(--accent-primary);
    border-radius: 50%;
    cursor: grab;
    z-index: 5;
    border: 2px solid var(--surface-primary);
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    user-select: none;
    will-change: transform;
}

.marker-item:hover {
    transform: translateY(-50%) scale(1.2);
    box-shadow: 0 0 8px var(--accent-primary);
}

/* Estados de Interação para Marcadores - HARMONIZAÇÃO VISUAL */
.marker-item.selected {
    background: var(--accent-primary);
    box-shadow: 0 0 12px rgba(14, 99, 156, 0.4);
    transform: translateY(-50%) scale(1.1);
    border: 2px solid var(--accent-primary-active); /* Borda destacada consistente */
    opacity: 1; /* Totalmente visível quando selecionado */
}

.marker-item.dragging {
    background: linear-gradient(135deg, var(--accent-primary-hover), var(--accent-primary-active));
    opacity: 0.85; /* Consistente com overlays */
    transform: translateY(-50%) scale(1.2);
    box-shadow: 0 6px 16px rgba(14, 99, 156, 0.5);
    cursor: grabbing;
    border-color: var(--accent-primary);
}

.marker-item.active {
    background: var(--warning-primary);
    box-shadow: 0 0 16px var(--warning-primary);
    animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { transform: translateY(-50%) scale(1.2); }
    50% { transform: translateY(-50%) scale(1.4); }
}

/* Time Info - Informações de Tempo */
.time-info {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--surface-tertiary);
    color: var(--text-primary);
    padding: var(--spacing-1) var(--spacing-2);
    border-top: 1px solid var(--border-color);
    font-size: var(--font-size-xs);
    font-family: var(--font-mono);
    z-index: 5;
    pointer-events: none;
    box-shadow: 0 -1px 2px rgba(0,0,0,0.1);
    margin-top: var(--spacing-2);
}

.time-info span {
    color: var(--text-secondary);
    font-weight: 400;
}

.time-info .font-mono {
    color: var(--text-primary);
    font-weight: 500;
}


/* Trilha de Overlays */
.overlays-track {
    background: var(--surface-tertiary);
    cursor: crosshair; /* Indica que é clicável */
    position: relative;
    transition: all 0.2s ease;
}

/* Feedback visual para indicar interação com overlays */
.overlays-track::after {
    content: "Clique para selecionar e editar segmentos";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: var(--text-tertiary);
    font-size: var(--font-size-xs);
    font-family: var(--font-sans);
    opacity: 0.5;
    pointer-events: none;
    transition: opacity 0.2s ease;
    z-index: 1;
    white-space: nowrap;
}

/* Hover state removido para manter consistência visual com timeline-track principal */

/* Ocultar texto quando houver elementos (apenas tracks de conteúdo dinâmico) */
.markers-track:has(.marker-item)::after,
.overlays-track:has(.overlay-segment)::after {
    opacity: 0;
}

/* Timeline-track sempre mostra o texto pois playhead é controle permanente */

.overlay-segment {
    position: absolute;
    top: 4px;
    bottom: 4px;
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-primary-hover));
    border-radius: 3px;
    cursor: grab;
    z-index: 4;
    border: 1px solid var(--accent-primary);
    user-select: none;
    will-change: transform;
    transition: all 0.2s ease;
    opacity: 0.9; /* Base opacidade para harmonia visual */
}

.overlay-segment:hover {
    background: linear-gradient(135deg, var(--accent-primary-hover), var(--accent-primary-active));
    box-shadow: 0 2px 8px rgba(14, 99, 156, 0.3);
    transform: translateY(-1px);
    opacity: 1; /* Totalmente opaco no hover */
    border-color: var(--accent-primary-hover);
}

/* Estados de Interação para Overlays - CORREÇÃO VISUAL */
.overlay-segment.selected {
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-primary-active));
    box-shadow: 0 0 12px rgba(14, 99, 156, 0.4);
    transform: scale(1.02);
    opacity: 1; /* Totalmente visível quando selecionado */
    border-color: var(--accent-primary);
    border-width: 2px; /* Borda mais destacada */
}

.overlay-segment.dragging {
    background: linear-gradient(135deg, var(--accent-primary-hover), var(--accent-primary-active));
    opacity: 0.85; /* Mais visível, menos translúcido */
    box-shadow: 0 6px 16px rgba(14, 99, 156, 0.5);
    cursor: grabbing;
    transform: scale(1.01);
}

.marker-item[title]:hover::after,
.overlay-segment[title]:hover::after {
    content: attr(title);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--tooltip-bg-primary);
    color: var(--tooltip-text-primary);
    padding: var(--tooltip-padding-y) var(--tooltip-padding-x);
    border-radius: var(--tooltip-border-radius);
    font-size: var(--tooltip-font-size);
    font-family: var(--font-family-monospace);
    white-space: nowrap;
    z-index: var(--tooltip-z-index);
    border: 1px solid var(--tooltip-border-primary);
    box-shadow: var(--tooltip-shadow);
    margin-bottom: var(--tooltip-margin);
    backdrop-filter: var(--tooltip-backdrop-filter);
    max-width: var(--tooltip-max-width);
    text-overflow: ellipsis;
    overflow: hidden;
}

/* Adicionar classe tooltip-unified para novos elementos */
.marker-item.tooltip-unified,
.overlay-segment.tooltip-unified {
    /* Herda estilos do sistema unificado automaticamente */
}

.hidden{display:none!important;}
.flex{display:flex;}
.grid{display:grid;}
.items-center{align-items:center;}
.justify-between{justify-content:space-between;}
.gap-2{gap:calc(var(--unit)*2);}
.p-3{padding:calc(var(--unit)*3);}
.text-sm{font-size:12px;}
.text-xs{font-size: var(--font-size-xs);}
.font-mono{font-family:var(--font-mono);}
.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}


@media (prefers-reduced-motion: reduce) {
    .btn{
        transition:none;
    }
}
.window-control-tooltip {
    position: absolute;
    bottom: -28px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--tooltip-bg-primary);
    color: var(--tooltip-text-primary);
    padding: var(--tooltip-padding-y) var(--tooltip-padding-x);
    border-radius: var(--tooltip-border-radius);
    font-size: var(--tooltip-font-size);
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: var(--tooltip-transition);
    border: 1px solid var(--tooltip-border-primary);
    box-shadow: var(--tooltip-shadow);
    z-index: var(--tooltip-z-index);
    backdrop-filter: var(--tooltip-backdrop-filter);
}

.window-control-tooltip::after {
    content: '';
    position: absolute;
    top: -3px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 3px solid transparent;
    border-right: 3px solid transparent;
    border-bottom: 3px solid var(--tooltip-border-primary);
}

.window-control:hover .window-control-tooltip,
.window-control:focus .window-control-tooltip {
    opacity: 1;
}

/* Container para gerenciamento de fila de notificações */
.notification-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 10000;
    pointer-events: none;
    max-width: min(400px, calc(100vw - 40px));
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-1);
}

/* Conteúdo da notificação simplificado */
.notification-content {
    flex: 1;
    line-height: 1.4;
}

/* Responsividade para dispositivos móveis */
@media (max-width: 768px) {
    .notification-container {
        top: 10px;
        right: 10px;
        left: 10px;
        max-width: none;
    }

    .notification {
        padding: 10px 12px;
        font-size: var(--font-size-xs);
    }

    .notification::before {
        font-size: 12px;
    }
}

@media (max-width: 480px) {
    .notification-container {
        top: 5px;
        right: 5px;
        left: 5px;
    }

    .notification {
        padding: 8px 10px;
    }
}

.notification {
    position: relative;
    background: var(--surface-secondary);
    color: var(--text-primary);
    padding: var(--spacing-3) var(--spacing-4);
    border-radius: var(--radius);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-md);
    font-size: var(--font-size-sm);
    margin-bottom: var(--spacing-2);
    opacity: 0;
    transform: translateX(100%) scale(0.95);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: auto;
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    backdrop-filter: blur(8px);
    will-change: transform, opacity;
}

.notification.show {
    opacity: 1;
    transform: translateX(0) scale(1);
}

.notification.hiding {
    opacity: 0;
    transform: translateX(100%);
    transition: all 0.2s ease-in;
}

.notification:hover {
    transform: translateX(-1px);
    box-shadow: var(--shadow-lg);
}

/* Animação escalonada simplificada */
.notification.show:nth-child(1) { animation-delay: 0ms; }
.notification.show:nth-child(2) { animation-delay: 50ms; }
.notification.show:nth-child(3) { animation-delay: 100ms; }
.notification.show:nth-child(4) { animation-delay: 150ms; }

/* Estados de notificação simplificados */
.notification.success {
    border-color: var(--success-primary);
    box-shadow: var(--shadow-md), 0 0 0 1px var(--success-bg);
}

.notification.success::before {
    color: var(--success-primary);
}

.notification.error {
    border-color: var(--error-primary);
    box-shadow: var(--shadow-md), 0 0 0 1px var(--error-bg);
}

.notification.error::before {
    color: var(--error-primary);
}

.notification.warning {
    border-color: var(--warning-primary);
    box-shadow: var(--shadow-md), 0 0 0 1px var(--warning-bg);
}

.notification.warning::before {
    color: var(--warning-primary);
}

.notification.info {
    border-color: var(--accent-primary);
    box-shadow: var(--shadow-md), 0 0 0 1px var(--interactive-hover);
}

.notification.info::before {
    color: var(--info-primary);
}

/* Ícones para notificações - simplificados */
.notification::before {
    font-family: 'Font Awesome 7 Free';
    font-weight: 900;
    font-size: var(--font-size-sm);
    opacity: 0.8;
    transition: opacity 0.2s ease;
    margin-right: var(--spacing-2);
    flex-shrink: 0;
}

.notification.show::before {
    opacity: 0.9;
}

.notification:hover::before {
    opacity: 1;
}

.notification.success::before {
    content: '\f00c';
}

.notification.error::before {
    content: '\f00d';
}

.notification.warning::before {
    content: '\f071';
}

.notification.info::before {
    content: '\f05a';
}

/* Botão de fechar simplificado */
.notification-close {
    margin-left: auto;
    background: none;
    border: none;
    color: var(--text-secondary);
    opacity: 0.6;
    cursor: pointer;
    font-size: var(--font-size-lg);
    padding: 2px;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius);
    transition: all 0.2s ease;
}


.notification-close:hover {
    opacity: 1;
    background: var(--interactive-hover);
    color: var(--text-primary);
}

/* Estados de alto contraste */
@media (prefers-contrast: high) {
    .notification {
        border-width: 2px;
    }

    .notification::before {
        opacity: 1;
    }
}

/* Estados de movimento reduzido */
@media (prefers-reduced-motion: reduce) {
    .notification,
    .notification::before,
    .notification-close,
    .notification.show,
    .notification.hiding {
        transition: none;
        animation: none;
    }

    .notification.show {
        opacity: 1;
        transform: translateX(0);
    }

    .notification.show::before {
        opacity: 0.9;
        transform: scale(1);
    }

    .notification.show .notification-close {
        opacity: 0.6;
    }
}

.context-menu {
    position: fixed;
    background: var(--surface-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    padding: 4px 0;
    min-width: 200px;
    z-index: 10000;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.context-menu-item {
    width: 100%;
    text-align: left;
    padding: 6px 12px;
    border: none;
    background: none;
    color: var(--text-primary);
    font-size: 12px;
    cursor: pointer;
    border-radius: 0;
    transition: background-color 0.15s ease;
}

.context-menu-item:hover {
    background: var(--accent);
    color: white;
}

.context-menu-item:focus {
    outline: 2px solid var(--accent);
    outline-offset: -2px;
}

.context-menu-item:active {
    background: var(--accent-hover);
}

/* Context menu divider */
.context-menu-divider {
    height: 1px;
    background: var(--border-color);
    margin: 4px 0;
}

.status-indicator {
    position: fixed;
    top: 10px;
    right: 10px;
    padding: 10px;
    border-radius: 5px;
    font-size: 12px;
    z-index: 10000;
    font-family: var(--font-mono);
    transition: all 0.3s ease;
}

.status-indicator.success {
    background: var(--success);
    color: white;
}

.status-indicator.error {
    background: var(--error);
    color: white;
}

.status-indicator.warning {
    background: var(--warning);
    color: white;
}

.status-indicator.info {
    background: var(--info);
    color: white;
}


.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: var(--focus-transition);
}

.modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.modal {
    background: var(--surface-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    padding: calc(var(--unit) * 6);
    box-shadow: var(--shadow-heavy);
    max-width: 90vw;
    max-height: 90vh;
    overflow: auto;
    transform: scale(0.9) translateY(-20px);
    transition: var(--focus-transition);
    backdrop-filter: blur(10px);
}

.modal-overlay.active .modal {
    transform: scale(1) translateY(0);
}

/* Advanced Project Modal Specific Styles */
.advanced-project-modal {
    max-width: 500px;
    width: 100%;
}

.advanced-project-modal h3 {
    margin: 0 0 calc(var(--unit) * 4) 0;
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    color: var(--text-heading);
    text-align: center;
}

.advanced-project-modal form {
    display: flex;
    flex-direction: column;
    gap: calc(var(--unit) * 3);
}

.advanced-project-modal label {
    font-weight: var(--font-weight-medium);
    color: var(--text-primary);
    margin-bottom: calc(var(--unit) * 1);
}

/* OTIMIZAÇÃO: Seletores CSS simplificados para melhor performance */
.advanced-project-modal .form-input,
.advanced-project-modal .form-select {
    padding: calc(var(--unit) * 2);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    background: var(--surface-primary);
    color: var(--text-primary);
    font-size: 14px;
    transition: var(--focus-transition);
}

.advanced-project-modal .form-input:focus,
.advanced-project-modal .form-select:focus {
    outline: none;
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 2px var(--accent-focus);
}

.advanced-project-modal .radio-group {
    display: flex;
    flex-direction: column;
    gap: calc(var(--unit) * 1.5);
}

.advanced-project-modal .radio-group label {
    display: flex;
    align-items: center;
    gap: calc(var(--unit) * 1.5);
    margin-bottom: 0;
    cursor: pointer;
    font-weight: var(--font-weight-normal);
}

.advanced-project-modal .radio-group input[type="radio"] {
    width: 16px;
    height: 16px;
    accent-color: var(--primary);
}

.advanced-project-modal .modal-buttons {
    display: flex;
    gap: calc(var(--unit) * 2);
    justify-content: flex-end;
    margin-top: calc(var(--unit) * 2);
}

.advanced-project-modal .btn {
    padding: calc(var(--unit) * 2) calc(var(--unit) * 3);
    background: var(--surface-quaternary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.15s ease;
    font-weight: var(--font-weight-medium);
    font-size: 13px;
}

.advanced-project-modal .btn:hover {
    background: var(--accent);
    border-color: var(--accent);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
}

.advanced-project-modal .btn:active {
    transform: translateY(0);
    box-shadow: none;
}

.advanced-project-modal .btn:focus {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
}

.advanced-project-modal .btn.secondary {
    background: var(--surface-quaternary);
    color: var(--text-primary);
    border-color: var(--border-color);
}

.advanced-project-modal .btn.secondary:hover {
    background: var(--accent);
    border-color: var(--accent);
    color: var(--text-primary);
}

.advanced-project-modal .btn.primary {
    background: var(--accent);
    color: var(--text-primary);
    border-color: var(--accent);
}

.advanced-project-modal .btn.primary:hover {
    background: var(--accent-hover);
    border-color: var(--accent-hover);
    color: var(--text-primary);
}

/* Modal Header */
.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: calc(var(--unit) * 4);
    padding-bottom: calc(var(--unit) * 3);
    border-bottom: 1px solid var(--border-color);
}

.modal-title {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--text-heading);
    margin: 0;
}

.modal-close {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: var(--font-size-lg);
    cursor: pointer;
    padding: 4px;
    border-radius: var(--radius);
    transition: var(--hover-transition);
}

.modal-close:hover {
    background: var(--surface-hover);
    color: var(--text-primary);
}

.modal-close:focus {
    outline: 2px solid var(--accent-focus);
    outline-offset: 2px;
}

.modal-close:active {
    transform: scale(0.95);
}


.dialog-container {
    background: var(--surface-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    padding: calc(var(--unit) * 6);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    margin: auto;
}

.dialog-progress {
    text-align: center;
    min-width: 300px;
}

.dialog-progress .loader {
    border: 4px solid var(--surface-quaternary);
    border-top: 4px solid var(--accent);
    border-radius: 50%;
    width: 48px;
    height: 48px;
    animation: spin 1s linear infinite;
    margin: 0 auto calc(var(--unit) * 3) auto;
}

.dialog-progress .loading-text {
    font-size: 14px;
    color: var(--text-primary);
    font-weight: var(--font-weight-medium);
    margin-bottom: calc(var(--unit) * 3);
}

.dialog-progress .progress-bar {
    width: 200px;
    height: 8px;
    background-color: var(--surface-quaternary);
    border-radius: 4px;
    margin: calc(var(--unit) * 2) auto;
    overflow: hidden;
    border: 1px solid var(--border-color);
}

.dialog-progress .progress-fill {
    height: 100%;
    background-color: var(--accent);
    width: 0%;
    transition: width 0.3s ease;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Confirm Modal - Design Refinado */
.modal.confirm-modal-enhanced {
    text-align: center;
    max-width: 400px;
    padding: 32px 24px;
}

.confirm-icon {
    margin-bottom: 20px;
}

.confirm-icon i {
    font-size: var(--font-size-3xl);
    color: var(--warning);
    animation: confirmShake 0.5s ease-in-out;
    display: inline-block;
}

@keyframes confirmShake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px) rotate(-5deg); }
    75% { transform: translateX(5px) rotate(5deg); }
}

.confirm-content {
    margin-bottom: 24px;
}

.confirm-title {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--text-primary);
    margin: 0 0 12px 0;
    line-height: 1.3;
}

.confirm-message {
    font-size: 14px;
    color: var(--text-secondary);
    margin: 0;
    line-height: 1.5;
}

.confirm-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
}

.btn-cancel {
    background: var(--surface-tertiary);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
    padding: 10px 20px;
    border-radius: var(--radius);
    font-size: 14px;
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 100px;
}

.btn-cancel:hover {
    background: var(--surface-quaternary);
    border-color: var(--text-secondary);
    transform: translateY(-1px);
}

.btn-cancel:focus {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

/* Efeito de foco no modal */
.modal-overlay.active .confirm-modal-enhanced {
    animation: modalSlideIn 0.3s ease-out;
}

/* modalSlideIn consolidado - usando definição unificada mais recente */

/* Progress Modal */
.modal.progress-modal {
    min-width: 300px;
    text-align: center;
}

.progress-modal .loader {
    width: 40px;
    height: 40px;
    border: 4px solid var(--surface-quaternary);
    border-top: 4px solid var(--accent);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto calc(var(--unit) * 4);
}

.progress-modal .loading-text {
    font-size: 14px;
    color: var(--text-primary);
    margin-bottom: calc(var(--unit) * 4);
}

.progress-modal .progress-bar {
    width: 100%;
    height: 8px;
    background: var(--surface-quaternary);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: calc(var(--unit) * 2);
}

.progress-modal .progress-fill {
    height: 100%;
    background: var(--accent);
    transition: width 0.3s ease;
    width: 0%;
}

/* Animação spin duplicada removida - usando primeira definição */

/* Prompt Modal */
.modal.prompt-modal {
    max-width: 400px;
}

.prompt-modal .title {
    font-size: var(--font-size-lg);
    color: var(--text-heading);
    font-weight: var(--font-weight-semibold);
    margin-bottom: calc(var(--unit) * 3);
}

.prompt-modal .message {
    font-size: 14px;
    color: var(--text-primary);
    margin-bottom: calc(var(--unit) * 4);
    line-height: 1.5;
}

/* Menu Styles */
.menu-separator {
    height: 1px;
    background: var(--border-color);
    margin: calc(var(--unit) * 1.5) 0;
}

.menu-header {
    font-size: 12px;
    color: var(--text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin: calc(var(--unit) * 2) calc(var(--unit) * 2) calc(var(--unit) * 1);
    pointer-events: none;
}

.menu-item {
    margin: 0;
}

.menu-item.disabled {
    pointer-events: none;
}

.recent-project-btn {
    width: 100%;
    text-align: left;
    font-size: 12px;
    padding: calc(var(--unit) * 2) calc(var(--unit) * 3);
    border: none;
    background: transparent;
    color: var(--text-primary);
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.recent-project-btn:hover {
    background: var(--surface-tertiary);
}

.recent-project-btn i {
    opacity: 0.6;
}

/* Gabarito Modal Styles */
.gabarito-modal {
    max-width: 500px;
}

.gabarito-options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: calc(var(--unit) * 2);
    margin: calc(var(--unit) * 3) 0;
}

.gabarito-option {
    padding: calc(var(--unit) * 3);
    border: 2px solid var(--border-color);
    border-radius: var(--radius);
    background: var(--surface-secondary);
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    font-weight: var(--font-weight-medium);
}

.gabarito-option:hover {
    border-color: var(--accent);
    background: var(--surface-tertiary);
}

.gabarito-option.selected {
    border-color: var(--success);
    background: var(--surface-quaternary);
    color: var(--success);
    box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

/* Overlay Modal Styles */
.overlay-modal {
    max-width: 600px;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: calc(var(--unit) * 3);
}

.form-group {
    margin-bottom: calc(var(--unit) * 3);
}

.form-group label {
    display: block;
    margin-bottom: calc(var(--unit) * 1);
    font-weight: var(--font-weight-medium);
    color: var(--text-primary);
}

.form-group .input {
    width: 100%;
    padding: calc(var(--unit) * 2);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    background: var(--surface-secondary);
    color: var(--text-primary);
    transition: border-color 0.2s ease;
}

.form-group .input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.form-group input[type="range"] {
    margin-top: calc(var(--unit) * 1);
}

.btn.danger {
    background: var(--error);
    color: white;
}

.btn.danger:hover {
    background: var(--error-hover);
}

/* Video Overlay Canvas Styles */
.video-container {
    position: relative;
}

.video-container.has-overlay {
    position: relative;
}

.video-overlay-canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 5;
}

.video-overlay-canvas[style*="--canvas-width"] {
    width: var(--canvas-width, 100%);
    height: var(--canvas-height, 100%);
    left: var(--canvas-left, 0);
    top: var(--canvas-top, 0);
    margin: auto;
    position: absolute;
}

.prompt-modal .input {
    width: 100%;
    padding: calc(var(--unit) * 2);
    background: var(--surface-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    color: var(--text-primary);
    font-size: 14px;
    margin-bottom: calc(var(--unit) * 4);
}

.prompt-modal .input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
}

.prompt-modal .buttons {
    display: flex;
    justify-content: flex-end;
    gap: calc(var(--unit) * 3);
}

.prompt-modal .btn {
    padding: calc(var(--unit) * 2) calc(var(--unit) * 4);
    border-radius: var(--radius);
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s ease;
}

.prompt-modal .btn:first-child {
    background: var(--surface-quaternary);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
}

.prompt-modal .btn:first-child:hover {
    background: var(--surface-hover);
    border-color: var(--accent);
}

.prompt-modal .btn:last-child {
    background: var(--accent);
    border: 1px solid var(--accent);
    color: white;
}

.prompt-modal .btn:last-child:hover {
    background: var(--accent-hover);
    border-color: var(--accent-hover);
}
.dialog-confirm {
    text-align: center;
    min-width: 350px;
    max-width: 450px;
}

.dialog-confirm .icon {
    width: 48px;
    height: 48px;
    margin: 0 auto calc(var(--unit) * 4) auto;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Warning Icon CSS */
.dialog-confirm .icon::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background: var(--warning);
    border-radius: 50%;
    animation: warningPulse 2s ease-in-out infinite;
}

.dialog-confirm .icon::after {
    content: '!';
    position: absolute;
    color: white;
    font-size: var(--font-size-2xl);
    font-weight: bold;
    font-family: var(--font-sans);
    z-index: 1;
}

@keyframes warningPulse {
    0%, 100% {
        transform: scale(1);
        opacity: 0.8;
    }
    50% {
        transform: scale(1.1);
        opacity: 1;
    }
}

.dialog-confirm .title {
    font-size: var(--font-size-lg);
    color: var(--text-heading);
    font-weight: var(--font-weight-bold);
    margin-bottom: calc(var(--unit) * 3);
    letter-spacing: 0.02em;
}

.dialog-confirm .message {
    font-size: 14px;
    color: var(--text-primary);
    margin-bottom: calc(var(--unit) * 6);
    line-height: 1.5;
}

.dialog-confirm .buttons {
    display: flex;
    justify-content: center;
    gap: calc(var(--unit) * 4);
}

.dialog-confirm .btn-cancel {
    background: var(--surface-quaternary);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
}

.dialog-confirm .btn-cancel:hover {
    background: var(--surface-hover);
    border-color: var(--accent);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
}

.dialog-confirm .btn-confirm {
    background: var(--error);
    border: 1px solid var(--error);
    color: white;
}

.dialog-confirm .btn-confirm:hover {
    background: var(--error-hover);
    border-color: var(--error-hover);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px var(--error-bg);
}

/* Prompt Dialog */
.dialog-prompt {
    max-width: 400px;
}

.dialog-prompt .title {
    font-size: var(--font-size-md);
    margin-bottom: calc(var(--unit) * 3);
    color: var(--text-heading);
    font-weight: var(--font-weight-bold);
}

.dialog-prompt .message {
    font-size: 14px;
    margin-bottom: calc(var(--unit) * 4);
    color: var(--text-primary);
    line-height: 1.5;
}

.dialog-prompt .input {
    padding: calc(var(--unit) * 2);
    margin-bottom: calc(var(--unit) * 4);
    background: var(--surface-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    width: 100%;
    box-sizing: border-box;
    font-size: 14px;
    color: var(--text-primary);
    transition: border-color 0.15s ease;
}

.dialog-prompt .input:focus {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    border-color: var(--accent);
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
}

.dialog-prompt .buttons {
    display: flex;
    justify-content: flex-end;
    gap: calc(var(--unit) * 3);
}

.dialog-prompt #okButton {
    background: var(--accent);
    border-color: var(--accent);
    color: white;
}

.dialog-prompt #okButton:hover {
    background: var(--accent-hover);
    border-color: var(--accent-hover);
}

.dialog-prompt #cancelButton {
    background: var(--surface-quaternary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

.dialog-prompt #cancelButton:hover {
    background: var(--surface-hover);
    border-color: var(--accent);
}

/* Desktop Dialog Window Layout */
.dialog-window {
    width: 100%;
    height: 100vh;
    background: var(--surface-primary);
    font-family: var(--font-sans);
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

/* Dialog Titlebar */
.dialog-titlebar {
    height: 32px;
    background: var(--surface-tertiary);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 8px;
    border-bottom: 1px solid var(--border-color);
    cursor: move; /* Indicar que é arrastável */
}

.dialog-title {
    font-size: 12px;
    font-weight: var(--font-weight-semibold);
    color: var(--text-primary);
}

/* Dialog Content Area */
.dialog-content {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: calc(var(--unit) * 4);
    overflow: auto;
}

/* Dialog Accessibility Enhancements */
.dialog-container:focus,
.dialog-container:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3);
}

/* High Contrast Mode Support for Dialogs */
@media (prefers-contrast: high) {
    .dialog-container {
        border: 2px solid currentColor;
    }

    .dialog-progress .progress-bar {
        border-width: 2px;
    }

    .dialog-confirm .btn-cancel,
    .dialog-confirm .btn-confirm {
        border-width: 2px;
    }

    .dialog-prompt .input {
        border-width: 2px;
    }
}

@media (prefers-reduced-motion: reduce) {
    .dialog-progress .loader {
        animation: none;
        border-top-color: var(--accent);
    }

    .dialog-progress .progress-fill {
        transition: none;
    }

    .dialog-confirm .icon::before {
        animation: none;
        opacity: 0.8;
    }
}

.form-note {
    background: var(--surface-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    padding: calc(var(--unit) * 3);
    margin-top: calc(var(--unit) * 4);
    color: var(--text-secondary);
    font-size: 12px;
}

.form-note i {
    color: var(--info);
    margin-right: calc(var(--unit) * 2);
}

.form-note strong {
    color: var(--text-primary);
}


/* === ESTILOS PARA OVERLAYMANAGER === */

/* Modal de Overlay */
#overlayModal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
}

.overlay-modal .modal {
    background: var(--surface-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    padding: 20px;
    max-width: 500px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
}

#overlayModal .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--border-color);
}

#overlayModal .modal-header h3 {
    margin: 0;
    color: var(--text-primary);
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
}

#overlayModal .modal-close {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: var(--font-size-xl);
    cursor: pointer;
    padding: 5px;
    border-radius: var(--radius);
    transition: var(--hover-transition);
}

#overlayModal .modal-close:hover {
    background: var(--surface-hover);
    color: var(--text-primary);
}

#overlayModal .modal-close:focus {
    outline: 2px solid var(--accent-focus);
    outline-offset: 2px;
}

#overlayModal .modal-body {
    margin-bottom: 20px;
}

#overlayModal .form-group {
    margin-bottom: 16px;
}

#overlayModal label {
    display: block;
    margin-bottom: 8px;
    font-weight: var(--font-weight-medium);
    color: var(--text-primary);
    font-size: 14px;
}

#overlayModal input[type="file"],
#overlayModal input[type="number"],
#overlayModal select {
    width: 100%;
    padding: 8px 12px;
    background: var(--surface-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    color: var(--text-primary);
    font-size: 14px;
    box-sizing: border-box;
    transition: var(--focus-transition);
}

#overlayModal input[type="file"]:focus,
#overlayModal input[type="number"]:focus,
#overlayModal select:focus {
    outline: none;
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 2px var(--accent-focus);
}

#overlayModal .modal-footer {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    padding-top: 15px;
    border-top: 1px solid var(--border-color);
}

#overlayModal .btn {
    padding: 10px 20px;
    border-radius: var(--radius);
    cursor: pointer;
    font-size: 14px;
    font-weight: var(--font-weight-medium);
    transition: var(--btn-transition);
    border: 1px solid var(--border-color);
}

#overlayModal .btn-primary {
    background: var(--accent-primary);
    color: white;
    border-color: var(--accent-primary);
}

#overlayModal .btn-primary:hover {
    background: var(--accent-primary-hover);
    border-color: var(--accent-primary-hover);
}

#overlayModal .btn-secondary {
    background: var(--surface-secondary);
    color: var(--text-primary);
    border-color: var(--border-color);
}

#overlayModal .btn-secondary:hover {
    background: var(--surface-hover);
    border-color: var(--accent-primary);
}

#overlayModal .btn-error {
    background: var(--error);
    color: white;
    border-color: var(--error);
}

#overlayModal .btn-error:hover {
    background: var(--error-hover);
    border-color: var(--error-hover);
}

/* Canvas overlay para vídeo */
.video-overlay-canvas {
    position: absolute;
    top: var(--canvas-top, 0);
    left: var(--canvas-left, 0);
    width: var(--canvas-width, 100%);
    height: var(--canvas-height, 100%);
    pointer-events: none;
    z-index: 10;
}

.video-container.has-overlay {
    position: relative;
}

/* === ESTILOS PARA VIDEOCUTTER === */

/* Seleção visual na timeline */
.timeline-selection {
    position: absolute;
    top: 0;
    height: 100%;
    pointer-events: none;
    z-index: 8;
}

.selection-area {
    position: absolute;
    top: 8px;
    bottom: 8px;
    background: var(--error-bg-hover);
    border: 1px solid var(--error);
    border-radius: 4px;
}

/* REMOVIDO: Definição CSS duplicada de selection-start/end
   (mantida apenas a definição completa em ~2826 que controla opacity) */

/* Estados ativos dos botões */
#overlayButton.active {
    background: var(--accent);
    color: white;
    animation: buttonActivePulse 0.6s ease-out;
}

#overlayButton.active:hover {
    background: var(--accent-hover);
}

#cutButton.active {
    background: var(--error);
    color: white;
    animation: buttonActivePulse 0.6s ease-out;
}

#cutButton.active:hover {
    background: var(--error-hover);
}

/* Animação para botões ativos */
@keyframes buttonActivePulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

/* Responsividade para modal */
@media (max-width: 600px) {
    #overlayModal .modal {
        width: 95%;
        padding: 15px;
    }

    #overlayModal .modal-footer {
        flex-direction: column;
    }

    #overlayModal .btn {
        width: 100%;
    }
}

/* ===================================================================== */
/* IMAGE OVERLAY MODAL - ESTILOS ESPECIFICOS PARA POSICIONAMENTO     */
/* ===================================================================== */

/* Estilos específicos para o modal de overlay de imagens - posicionamento */
#overlayModal .modal-body-desktop {
    display: flex;
    gap: 24px;
}

#overlayModal .position-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    height: 80px;
    margin-top: 8px;
}

#overlayModal .position-cell {
    background-color: var(--surface-secondary);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s, border-color 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

#overlayModal .position-cell:hover {
    background-color: var(--surface-tertiary);
}

#overlayModal .position-cell.selected {
    background-color: var(--accent-primary);
    border-color: var(--accent-primary);
}

#overlayModal .position-cell .dot {
    width: 8px;
    height: 8px;
    background-color: var(--text-tertiary);
    border-radius: 50%;
}

#overlayModal .position-cell.selected .dot {
    background-color: white;
}

/* ===================================================================== */
/* SISTEMA DE DESIGN UNIFICADO PARA MODAIS - AVALIBRAS UI2                 */
/* ===================================================================== */

/* 1.1 Tokens de Design para Modais */
:root {
    /* Espaçamentos modais */
    --modal-padding-xs: 12px;
    --modal-padding-sm: 16px;
    --modal-padding-md: 24px;
    --modal-padding-lg: 32px;
    --modal-padding-xl: 40px;

    /* Dimensões modais */
    --modal-width-xs: 320px;
    --modal-width-sm: 400px;
    --modal-width-md: 500px;
    --modal-width-lg: 600px;
    --modal-width-xl: 800px;
    --modal-width-full: 90vw;

    /* Cores específicas para modais */
    --modal-bg: var(--surface-secondary);
    --modal-border: var(--border-color);
    --modal-header-bg: var(--surface-secondary);
    --modal-overlay-bg: rgba(0, 0, 0, 0.6);

    /* Sombras modais */
    --modal-shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.15);
    --modal-shadow-md: 0 8px 24px rgba(0, 0, 0, 0.4);
    --modal-shadow-lg: 0 20px 60px rgba(0, 0, 0, 0.4);

    /* Bordas modais */
    --modal-border-radius: 8px;
    --modal-border-radius-sm: 6px;
    --modal-border-radius-lg: 12px;

    /* Tipografia modal - usando novo sistema de tokens */
    --modal-title-size: var(--font-size-lg);
    --modal-title-weight: var(--font-weight-semibold);
    --modal-subtitle-size: var(--font-size-xs);
    --modal-text-size: var(--font-size-sm);
    --modal-small-size: var(--font-size-xs);

    /* Botões modais */
    --modal-btn-min-width: 100px;
    --modal-btn-height: 40px;
    --modal-btn-gap: 12px;
    --modal-btn-padding: 12px 24px;

    /* Animações modais */
    --modal-transition-fast: 0.2s ease;
    --modal-transition-normal: 0.3s ease;
    --modal-transition-slow: 0.4s ease;

    /* ===================================================================== */
    /* TOKENS DESKTOP NATIVO - ADICIONAIS                             */
    /* ===================================================================== */

    /* Valores mais sutis para desktop nativo */
    --desktop-radius: 4px;
    --desktop-border: 1px solid #2d3748;
    --desktop-header-bg: #2d3748;
    --desktop-btn-hover: var(--error-bg);

    /* Sombras mais realistas de desktop */
    --desktop-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    --desktop-shadow-elevated: 0 4px 16px rgba(0, 0, 0, 0.2);

    /* Cores mais próximas do sistema operacional */
    --desktop-bg: #1a202c;
    --desktop-bg-1: #2d3748;
    --desktop-accent-hover: #3182ce;

    /* Dimensões desktop mais compactas */
    --desktop-header-height: 36px;
    --desktop-btn-height: 28px;
    --desktop-btn-width: 28px;
    --desktop-font-size-sm: 12px;
    --desktop-font-size-md: 13px;
    --desktop-font-size-lg: 14px;

    /* Espaçamentos desktop mais compactos */
    --desktop-padding-xs: 8px;
    --desktop-padding-sm: 12px;
    --desktop-padding-md: 16px;
    --desktop-padding-lg: 20px;

    /* Animações desktop mais rápidas */
    --desktop-transition-fast: 0.15s ease-out;
    --desktop-transition-normal: 0.2s ease-out;
}

/* 1.2 Componente Modal Base Unificado */
.modal-base {
    background: var(--modal-bg);
    border: 1px solid var(--modal-border);
    border-radius: var(--modal-border-radius);
    box-shadow: var(--modal-shadow-md);
    max-width: var(--modal-width-md);
    width: var(--modal-width-full);
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    animation: modalSlideIn var(--modal-transition-normal) cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Animação unificada de entrada */
@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: scale(0.95) translateY(-20px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* ===================================================================== */
/* COMPONENTE MODAL BASE DESKTOP - HÍBRIDO                           */
/* ===================================================================== */

.modal-base-desktop {
    background: var(--surface-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    box-shadow: var(--shadow-heavy);
    max-width: 500px;
    width: 90vw;
    max-height: 85vh;
    display: flex;
    flex-direction: column;
    animation: modalDesktopAppear var(--desktop-transition-normal);
}

/* Animação desktop mais rápida e sutil */
@keyframes modalDesktopAppear {
    from {
        opacity: 0;
        transform: scale(0.98) translateY(-8px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* Overlay unificado */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--modal-overlay-bg);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--modal-transition-normal), visibility var(--modal-transition-normal);
}

.modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

/* Animação unificada para todos os modais */
.modal-overlay.active .modal-base {
    animation: modalSlideIn var(--modal-transition-normal) cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Garantir que animação seja aplicada mesmo se a classe já existir */
.modal-base {
    animation: none; /* Reset para garantir animação retrigger */
}

.modal-overlay.active .modal-base {
    animation: modalSlideIn var(--modal-transition-normal) cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Sistema de variantes de tamanho */
.modal-xs { max-width: var(--modal-width-xs); }
.modal-sm { max-width: var(--modal-width-sm); }
.modal-md { max-width: var(--modal-width-md); }
.modal-lg { max-width: var(--modal-width-lg); }
.modal-xl { max-width: var(--modal-width-xl); }
.modal-full { max-width: var(--modal-width-full); }

/* ---------- Modal de Novo Projeto - MVP ---------- */


/* 1.3 Header Modal Unificado */
.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--modal-padding-md) var(--modal-padding-md) 0;
    margin-bottom: var(--modal-padding-md);
}

.modal-title {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: var(--modal-title-size);
    font-weight: var(--modal-title-weight);
    color: var(--text-primary);
    margin: 0;
    flex: 1;
}

.modal-title i {
    color: var(--accent);
    font-size: var(--font-size-xl);
    flex-shrink: 0;
}

.modal-close {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: var(--font-size-md);
    cursor: pointer;
    padding: var(--modal-padding-xs);
    border-radius: var(--modal-border-radius-sm);
    transition: all var(--modal-transition-fast);
    flex-shrink: 0;
}

.modal-close:hover {
    background: var(--surface-tertiary);
    color: var(--text-primary);
}

/* ===================================================================== */
/* HEADER DESKTOP NATIVO - ARRASTÁVEL                             */
/* ===================================================================== */

.modal-header-desktop {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: var(--desktop-header-height);
    padding: 0 var(--desktop-padding-md);
    background: var(--surface-secondary);
    border-bottom: 1px solid var(--border-color);
    border-radius: var(--radius) var(--radius) 0 0;
    cursor: move; /* Indicar que é arrastável */
    margin-bottom: 0;
}

.modal-title-desktop {
    font-size: var(--desktop-font-size-md);
    font-weight: var(--font-weight-semibold);
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1;
    margin: 0;
}

.modal-title-desktop i {
    font-size: var(--font-size-md);
    color: var(--accent);
    flex-shrink: 0;
}

/* Botão de fechar estilo desktop nativo */
.modal-close-desktop {
    -webkit-app-region: no-drag;
    width: var(--desktop-btn-width);
    height: var(--desktop-btn-height);
    border: none;
    background: transparent;
    color: var(--text-secondary);
    border-radius: 2px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--desktop-font-size-md);
    transition: all var(--desktop-transition-fast);
    flex-shrink: 0;
}

.modal-close-desktop:hover {
    background: var(--desktop-btn-hover);
    color: var(--error);
}

.modal-close-desktop:active {
    background: var(--error-bg-hover);
    transform: scale(0.95);
}

/* ===================================================================== */
/* CORPO DESKTOP NATIVO - CONTEÚDO                                    */
/* ===================================================================== */

.modal-body-desktop {
    flex: 1;
    padding: var(--desktop-padding-md);
    background: var(--surface-primary);
    line-height: 1.4;
    font-size: var(--desktop-font-size-sm);
    color: var(--text-primary);
    border-bottom: 1px solid var(--border-color);
    max-height: 60vh;
    overflow-y: auto;
}

/* Scrollbar desktop nativo */
.modal-body-desktop::-webkit-scrollbar {
    width: 8px;
}

.modal-body-desktop::-webkit-scrollbar-track {
    background: var(--surface-secondary);
}

.modal-body-desktop::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 2px;
}

.modal-body-desktop::-webkit-scrollbar-thumb:hover {
    background: var(--text-tertiary);
}

/* ===================================================================== */
/* FOOTER DESKTOP NATIVO - BOTÕES                                     */
/* ===================================================================== */

.modal-footer-desktop {
    display: flex;
    justify-content: flex-end;
    gap: 8px;
    padding: var(--desktop-padding-md);
    background: var(--surface-secondary);
    border-top: 1px solid var(--border-color);
    border-radius: 0 0 var(--radius) var(--radius);
    flex-shrink: 0;
}

/* Botões desktop nativos */
.modal-footer-desktop .btn {
    min-width: 80px;
    height: var(--desktop-btn-height);
    padding: 6px 12px;
    font-size: var(--desktop-font-size-sm);
    font-weight: var(--font-weight-medium);
    transition: var(--hover-transition);
    border-radius: var(--radius);
    border: 1px solid var(--border-color);
}

/* Botão primário desktop */
.modal-footer-desktop .btn-primary {
    background: var(--accent-primary);
    color: white;
    border-color: var(--accent-primary);
}

.modal-footer-desktop .btn-primary:hover {
    background: var(--accent-primary-hover);
    border-color: var(--accent-primary-hover);
    transform: translateY(-1px);
    box-shadow: var(--shadow-light);
}

/* Botão secundário desktop */
.modal-footer-desktop .btn-secondary {
    background: var(--surface-tertiary);
    color: var(--text-primary);
    border-color: var(--border-color);
}

.modal-footer-desktop .btn-secondary:hover {
    background: var(--surface-hover);
    border-color: var(--accent-primary);
    transform: translateY(-1px);
}

/* ===================================================================== */
/* MODAL DE CONFIRMAÇÃO DESKTOP                                    */
/* ===================================================================== */

.modal-base-desktop.confirm-modal-desktop {
    max-width: 400px;
    min-height: auto;
}

.confirm-modal-desktop .confirm-icon {
    text-align: center;
    padding: var(--desktop-padding-lg) var(--desktop-padding-md) var(--desktop-padding-md);
    color: var(--warning);
    font-size: var(--font-size-3xl);
}

.confirm-modal-desktop .confirm-content {
    text-align: center;
    padding: 0 var(--desktop-padding-md) var(--desktop-padding-md);
}

.confirm-modal-desktop .confirm-title {
    font-size: var(--desktop-font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--text-primary);
    margin-bottom: var(--spacing-sm);
}

.confirm-modal-desktop .confirm-message {
    font-size: var(--desktop-font-size-sm);
    color: var(--text-secondary);
    line-height: 1.4;
}

.confirm-modal-desktop .confirm-actions {
    display: flex;
    gap: var(--desktop-btn-gap);
    padding: var(--desktop-padding-md);
    justify-content: center;
}

/* ===================================================================== */
/* MODAL DE GABARITO DESKTOP                                          */
/* ===================================================================== */

.modal-base-desktop.gabarito-modal-desktop {
    max-width: 500px;
}

.gabarito-options-desktop {
    display: flex;
    flex-direction: row;
    justify-content: center;
    gap: var(--spacing-md);
    padding: var(--desktop-padding-md);
}

.gabarito-option-desktop {
    padding: var(--desktop-padding-md);
    border: 2px solid var(--border-light);
    border-radius: var(--desktop-radius);
    background: var(--surface-secondary);
    color: var(--text-primary);
    cursor: pointer;
    transition: all var(--desktop-transition-fast);
    text-align: center;
    font-weight: var(--font-weight-medium);
    font-size: var(--desktop-font-size-sm);
}

.gabarito-option-desktop:hover {
    border-color: var(--accent);
    background: var(--bg-tertiary);
    transform: translateY(-2px);
    box-shadow: var(--desktop-shadow);
}

.gabarito-option-desktop.selected {
    border-color: var(--success);
    background: var(--bg-success);
    color: var(--success);
    box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
}

/* ===================================================================== */
/* MODAL DE OVERLAY DESKTOP                                           */
/* ===================================================================== */

.modal-base-desktop.overlay-modal-desktop {
    max-width: 600px;
}

.overlay-form-desktop {
    padding: var(--desktop-padding-md);
}

.overlay-form-desktop .form-group {
    margin-bottom: var(--spacing-md);
}

.overlay-form-desktop .form-group label {
    display: block;
    font-weight: var(--desktop-font-weight);
    margin-bottom: var(--desktop-spacing-xs);
    color: var(--text-primary);
    font-size: var(--desktop-font-size-sm);
    line-height: var(--desktop-line-height);
}

.overlay-form-desktop .input,
.overlay-form-desktop select {
    width: 100%;
    padding: var(--desktop-padding-sm);
    border: var(--desktop-btn-border-width) solid var(--border-light);
    border-radius: var(--desktop-border-radius);
    background: var(--desktop-bg-1);
    color: var(--text-primary);
    font-size: var(--desktop-font-size-sm);
    line-height: var(--desktop-line-height);
    transition: all var(--desktop-transition-fast);
}

.overlay-form-desktop .input:focus,
.overlay-form-desktop select:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
}

.overlay-preview-desktop {
    padding: var(--spacing-sm);
    background: var(--bg-tertiary);
    border-radius: var(--desktop-border-radius);
    margin-bottom: var(--spacing-md);
    text-align: center;
    min-height: 120px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-tertiary);
    font-size: var(--desktop-font-size-sm);
}

.overlay-controls-desktop {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.overlay-control-group-desktop {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.overlay-control-group-desktop label {
    font-size: var(--desktop-font-size-xs);
    color: var(--text-secondary);
    font-weight: var(--font-weight-medium);
}

.overlay-slider-desktop {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.overlay-slider-desktop input[type="range"] {
    flex: 1;
    height: 4px;
}

.overlay-slider-desktop .value {
    min-width: 40px;
    text-align: right;
    font-size: var(--desktop-font-size-xs);
    color: var(--text-secondary);
}

/* ===================================================================== */
/* MODAL DE PROGRESSO DESKTOP                                         */
/* ===================================================================== */

.modal-base-desktop.progress-modal-desktop {
    max-width: 350px;
    min-height: auto;
    text-align: center;
}

.progress-content-desktop {
    padding: var(--desktop-padding-lg) var(--desktop-padding-md);
}

.progress-loader-desktop {
    width: 32px;
    height: 32px;
    border: 3px solid var(--border-light);
    border-top: 3px solid var(--accent);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto var(--spacing-md);
}

.progress-text-desktop {
    font-size: var(--desktop-font-size-sm);
    color: var(--text-primary);
    margin-bottom: var(--spacing-md);
}

.progress-bar-desktop {
    width: 100%;
    height: 6px;
    background: var(--bg-tertiary);
    border-radius: 3px;
    overflow: hidden;
    margin-bottom: var(--spacing-sm);
}

.progress-fill-desktop {
    height: 100%;
    background: var(--accent);
    transition: width 0.3s ease;
    width: 0%;
}

.modal-subtitle {
    color: var(--text-secondary);
    font-size: var(--modal-subtitle-size);
    margin-bottom: var(--modal-padding-md);
}

/* 1.4 Body Modal Consistente */
.modal-body {
    padding: 0 var(--modal-padding-md);
    max-height: 60vh;
    overflow-y: auto;
    flex: 1;
}

/* Scrollbar consistente para todos os modais */
.modal-body::-webkit-scrollbar {
    width: 6px;
}

.modal-body::-webkit-scrollbar-track {
    background: var(--surface-primary);
}

.modal-body::-webkit-scrollbar-thumb {
    background: var(--surface-quaternary);
    border-radius: 3px;
}

.modal-body::-webkit-scrollbar-thumb:hover {
    background: var(--surface-hover);
}

/* 1.5 Footer Modal Padronizado */
.modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: var(--modal-btn-gap);
    padding: var(--modal-padding-md);
    margin-top: var(--modal-padding-md);
    border-top: 1px solid var(--modal-border);
    flex-shrink: 0;
}

/* Sistema de botões hierárquico */
.modal-buttons {
    display: flex;
    gap: var(--modal-btn-gap);
    justify-content: flex-end;
    align-items: center;
}

.btn-modal-primary { order: 3; } /* Sempre à direita */
.btn-modal-secondary { order: 2; }
.btn-modal-tertiary { order: 1; } /* Sempre à esquerda */

/* Modal Buttons - Using unified button system */
.modal-buttons .btn {
    /* Use unified button system base classes */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: calc(var(--unit) * 1.5);
    border: 1px solid var(--border-color);
    border-radius: var(--btn-border-radius);
    cursor: pointer;
    font-family: var(--font-sans);
    font-weight: 500;
    white-space: nowrap;
    transition: var(--btn-transition);
    user-select: none;
    outline: none;

    /* Modal specific sizing - use secondary size as default */
    height: var(--btn-height-secondary);
    padding: var(--btn-padding-secondary);
    font-size: var(--btn-font-size-secondary);
    min-width: 100px;
}

.modal-buttons .btn i {
    font-size: var(--btn-icon-size-secondary);
}

.modal-buttons .btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(59,130,246,0.25);
}

.modal-buttons .btn:focus {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(59,130,246,0.2);
}

/* Estados de botões específicos */
.modal-buttons .btn:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

/* Botão primário sempre com estilo de destaque */
.modal-buttons .btn.primary,
.modal-buttons .btn.btn-modal-primary {
    order: 3;
}

/* Botão secundário sempre antes do primário */
.modal-buttons .btn.secondary,
.modal-buttons .btn.btn-modal-secondary {
    order: 2;
}

/* Botão terciário sempre à esquerda */
.modal-buttons .btn.tertiary,
.modal-buttons .btn.btn-modal-tertiary {
    order: 1;
}

/* Aplicar classes de ordem específicas para garantir consistência */
.modal-buttons .btn:not([class*="btn-modal-"]) {
    /* Botões sem classe específica usam ordem padrão */
}

.modal-buttons .btn-default {
    order: 99; /* Botões padrão vão para o final */
}

/* 1.7 Classes de contexto para modais */
.modal-warning .modal-title i {
    color: var(--warning);
}

.modal-error .modal-title i {
    color: var(--error);
}

.modal-success .modal-title i {
    color: var(--success);
}

.modal-info .modal-title i {
    color: var(--accent);
}

/* 1.8 Responsive Design para Modais */
@media (max-width: 600px) {
    .modal-base {
        width: 95vw;
        margin: var(--modal-padding-sm);
    }

    .modal-header {
        padding: var(--modal-padding-sm) var(--modal-padding-sm) 0;
        margin-bottom: var(--modal-padding-sm);
    }

    .modal-body {
        padding: 0 var(--modal-padding-sm);
    }

    .modal-footer {
        padding: var(--modal-padding-sm);
        flex-direction: column;
        gap: var(--modal-btn-gap);
    }

    .modal-buttons {
        flex-direction: column;
        width: 100%;
    }

    .modal-buttons .btn {
        width: 100%;
        min-width: unset;
    }

    /* Manter ordem lógica em mobile */
    .modal-buttons .btn.primary,
    .modal-buttons .btn.btn-modal-primary {
        order: 1;
    }

    .modal-buttons .btn.secondary,
    .modal-buttons .btn.btn-modal-secondary {
        order: 2;
    }
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 6px;
    font-weight: var(--font-weight-medium);
    color: var(--text-primary);
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

.input-hint {
    font-size: 11px;
    color: var(--text-tertiary);
    margin-top: 4px;
}

.checkbox-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    font-size: 13px;
    color: var(--text-secondary);
}

.checkbox-label input[type="checkbox"] {
    width: 16px;
    height: 16px;
    accent-color: var(--accent);
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* ---------- Sistema de Bloqueio de Interface ---------- */
.interface-locked {
    position: relative;
    pointer-events: none;
    filter: blur(2px);
    opacity: 0.7;
}

.interface-locked::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 9999;
}

.interface-locked #newProjectModal {
    position: relative;
    z-index: 10000;
    filter: none;
    opacity: 1;
}

.disabled {
    opacity: 0.4 !important;
    cursor: not-allowed !important;
    pointer-events: none !important;
}

.disabled:hover {
    background: none !important;
    transform: none !important;
}

/* Responsividade para formulários */
@media (max-width: 600px) {
    .form-row {
        grid-template-columns: 1fr;
        gap: 12px;
    }

    .new-project-modal {
        width: 95%;
        padding: 15px;
    }
}

/* ---------- Estilos do Modo Guiado ---------- */
.guided-tooltip {
    position: fixed;
    background: var(--surface-secondary);
    border: 2px solid var(--tooltip-border-primary);
    border-radius: var(--tooltip-border-radius);
    padding: var(--spacing-3) var(--spacing-4);
    max-width: 350px;
    z-index: var(--tooltip-z-index);
    box-shadow: var(--tooltip-shadow);
    backdrop-filter: blur(8px);
}

.guided-tooltip-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border-color);
}

.guided-tooltip-header h4 {
    display: flex;
    align-items: center;
    margin: 0;
    color: var(--tooltip-text-primary);
    font-size: 12px;
}

.guided-tooltip-header::before {
    content: '\f05a';
    font-family: 'Font Awesome 7 Free';
    font-weight: 900;
    font-size: var(--font-size-sm);
    color: var(--info-primary);
    margin-right: var(--spacing-2);
    opacity: 0.8;
}

.guided-tooltip-close {
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: var(--font-size-lg);
    cursor: pointer;
    padding: 0;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.guided-tooltip-content p {
    margin: 0 0 16px 0;
    color: var(--text-primary);
    font-size: 12px;
    line-height: 1.4;
}

.guided-tooltip-actions {
    display: flex;
    gap: 8px;
    justify-content: flex-end;
}

.guided-highlight {
    position: relative;
    z-index: 9999;
    box-shadow: 0 0 0 3px var(--accent), 0 0 20px rgba(59, 130, 246, 0.5);
    border-radius: var(--radius);
}

/* Animação de aparecimento do modal guiado */
@keyframes guidedTooltipFadeIn {
    from {
        opacity: 0;
        transform: scale(0.9);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.guided-tooltip {
    animation: guidedTooltipFadeIn 0.3s ease-out;
}


/* ===================================================================== */
/* SISTEMA DE ESTADOS VISUAIS CONSOLIDADO - FASE 1                     */
/* ===================================================================== */

/* Custom Properties para valores dinâmicos */
:root {
    /* Posicionamento dinâmico */
    --playhead-position: 0%;
    --progress-width: 0%;
    --selection-left: 0%;
    --selection-width: 0%;
    --overlay-left: 0%;
    --overlay-width: 0%;

    /* Estados de visibilidade */
    --playhead-display: block;
    --progress-display: block;
    --selection-display: none;

    /* Cursor states */
    --cursor-state: default;
    --body-cursor: default;

    /* Transições unificadas */
    --state-transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --position-transition: left 0.1s linear, width 0.1s linear;
    --interaction-transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
    --focus-transition: outline 0.2s ease, box-shadow 0.2s ease;
    --transform-transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --opacity-transition: opacity 0.2s ease;
}

/* ESTADOS DO PLAYHEAD (AGULHA) */
.playhead {
    left: var(--playhead-position);
    display: var(--playhead-display);
    transition: var(--state-transition);
}

.playhead.dragging {
    cursor: grabbing !important;
    z-index: 100;
    box-shadow: 0 0 20px var(--error-primary);
    transition: none;
}

.playhead.hidden {
    display: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
}

.playhead.hover {
    cursor: grab;
}

/* ESTADOS DA BARRA DE PROGRESSO - DEFINIÇÃO CONSOLIDADA */
.timeline-progress {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: linear-gradient(90deg, var(--primary), var(--primary-light));
    width: var(--progress-width, 0%);
    display: var(--progress-display, block);
    transition: width 0.05s linear;
    z-index: 1; /* Garantir que fique abaixo do playhead mas acima do fundo */
    pointer-events: none; /* Não interferir com interações */
}

.timeline-progress.hidden {
    display: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
}

/* ESTADOS DE SELEÇÃO */
.selection-area {
    position: absolute;
    top: 0;
    height: 100%;
    background: rgba(76, 201, 240, 0.25);
    border: 1px solid rgba(76, 201, 240, 0.5);
    display: var(--selection-display);
    left: var(--selection-left);
    width: var(--selection-width);
    transition: all 0.2s var(--transition-base);
    border-radius: var(--radius-sm);
    pointer-events: none;
    z-index: 1;
}

.selection-area.active {
    display: block;
    border: 2px dashed var(--accent-primary);
    border-radius: calc(var(--radius) / 2);
    opacity: 1;
    pointer-events: auto;
}

.selection-area.moving {
    cursor: grabbing;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Handles de seleção */
.selection-handle-start,
.selection-handle-end {
    cursor: ew-resize;
    pointer-events: auto;
    opacity: 1;
    z-index: 1000;
    transition: var(--state-transition);
}

.selection-handle-start:hover,
.selection-handle-end:hover {
    cursor: grabbing;
    box-shadow: 0 0 15px var(--warning-primary);
}

/* ESTADOS DA TIMELINE */
.timeline-track {
    cursor: var(--cursor-state);
    transition: var(--state-transition);
}

.timeline-track.selecting {
    cursor: crosshair;
    background: linear-gradient(90deg,
        var(--surface-primary) 0%,
        var(--error-bg) 50%,
        var(--surface-primary) 100%);
}

.timeline-track.selection-mode {
    cursor: crosshair;
}

/* ESTADOS DE MARCADORES E OVERLAYS */
.marker-item {
    cursor: grab;
    transition: var(--state-transition);
}

.marker-item.selected {
    transform: translateY(-50%) scale(1.2);
    box-shadow: 0 0 8px var(--accent-primary);
    z-index: 10;
}

.marker-item.dragging {
    cursor: grabbing;
    opacity: 0.7;
    z-index: 102;
    transform: translateY(-50%) scale(1.3);
    box-shadow: 0 0 20px var(--accent-primary);
}

.marker-item.disabled {
    opacity: 0.3;
    pointer-events: none;
}

.overlay-segment {
    left: var(--overlay-left);
    width: var(--overlay-width);
    cursor: grab;
    transition: var(--state-transition);
}

.overlay-segment.active {
    background: linear-gradient(45deg, var(--accent-primary), var(--accent-primary));
    box-shadow: 0 0 10px var(--accent-primary);
    transform: scale(1.02);
    z-index: 10;
}

.overlay-segment.dragging {
    opacity: 0.6;
    cursor: grabbing;
    box-shadow: var(--shadow-accent-hover);
    z-index: 15;
}

.overlay-segment.disabled {
    opacity: 0.4;
    pointer-events: none;
}

/* ESTADOS DO CORPO (BODY) */
body.cursor-grabbing {
    cursor: grabbing !important;
    user-select: none;
}

body.cursor-ew-resize {
    cursor: ew-resize !important;
    user-select: none;
}

body.cursor-col-resize {
    cursor: col-resize !important;
    user-select: none;
}

body.cursor-row-resize {
    cursor: row-resize !important;
    user-select: none;
}

/* ESTADOS DE FOCO E ACESSIBILIDADE */
.focus-visible {
    outline: 2px solid var(--accent-focus);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px var(--accent-subtle);
}

.state-loading {
    opacity: 0.7;
    pointer-events: none;
}

.state-loading::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    animation: loadingShimmer 1.5s infinite;
}

.state-error {
    background: linear-gradient(135deg, var(--error), var(--error-hover)) !important;
    border-color: var(--error) !important;
    animation: errorPulse 0.5s ease;
}

.state-success {
    background: linear-gradient(135deg, var(--success), var(--success-hover)) !important;
    border-color: var(--success) !important;
    animation: successPulse 0.5s ease;
}

/* ANIMAÇÕES UNIFICADAS */
@keyframes loadingShimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

@keyframes errorPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); }
}

@keyframes successPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.01); }
}

.state-transition-fast {
    transition: all 0.1s ease;
}

.state-transition-normal {
    transition: all 0.2s ease;
}

.state-transition-slow {
    transition: all 0.3s ease;
}

.no-transition {
    transition: none !important;
}


/* ===================================================================== */
/* DOCUMENTAÇÃO DO SISTEMA VISUAL CONSOLIDADO                          */
/* ===================================================================== */

/**
 * PADRÕES ESTABELECIDOS:
 * 
 * 1. CORES: Use sempre variáveis CSS --* primárias
 *    - Evite cores hardcoded (rgba(), #hex)
 *    - Prefira --surface-*, --text-*, --accent-*
 * 
 * 2. ESTADOS INTERATIVOS: Use data-attributes no body
 *    - body[data-interaction-state="estado"]
 *    - Estados disponíveis: idle, dragging_playhead, selecting_cut, 
 *      resizing_selection, moving_selection, hovering_marker, etc.
 * 
 * 3. FOCUS STATES: Use --accent-focus e --accent-subtle
 *    - outline: 2px solid var(--accent-focus)
 *    - box-shadow: 0 0 0 4px var(--accent-subtle)
 * 
 * 4. TRANSIÇÕES: Use variáveis de transição unificadas
 *    - --state-transition: para estados gerais
 *    - --interaction-transition: para interações rápidas
 *    - --position-transition: para posicionamento
 *    - --transform-transition: para transformações
 * 
 * 5. ACESSIBILIDADE: Respeite prefers-reduced-motion
 *    - Adicione @media (prefers-reduced-motion: reduce)
 *    - Use transições apropriadas para elementos animados
 * 
 * 6. CUSTOM PROPERTIES: Para valores dinâmicos
 *    - --playhead-position, --progress-width
 *    - --selection-left, --selection-width
 *    - --overlay-left, --overlay-width
 * 
 * MANUTENÇÃO:
 * - Ao adicionar novos estados, atualize interaction-states.css
 * - Ao adicionar novas cores, defina variáveis em :root
 * - Mantenha consistência com padrões existentes
 * - Teste acessibilidade em cada modificação
 */

/* ===================================================================== */
/* OTIMIZAÇÕES DE PERFORMANCE CSS - AvaLIBRAS v2.0                     */
/* ===================================================================== */

/* Seletores eficientes para timeline */
.timeline-track {
    /* Classe direta em vez de seletores encadeados */
}

.timeline-additional-track {
    /* Evitar aninhamento profundo */
}

/* Otimizações para overlay segments */
.overlay-segment {
    will-change: transform; /* Hint para otimização de GPU */
    contain: layout style paint; /* Isolamento de renderização */
}

.overlay-segment:hover {
    /* Simples hover state sem seletores complexos */
}

/* Otimizações para marcadores */
.marker-item {
    will-change: transform;
    contain: layout style paint;
}

/* Seletores eficientes para estados interativos */
.dragging {
    /* Classe única em vez de seletores múltiplos */
    z-index: 100;
}

.selected {
    /* Estado unificado de seleção */
    outline: 2px solid var(--accent-primary);
    outline-offset: 1px;
}

/* Classes utilitárias para performance */
.no-transition {
    transition: none !important;
}

.gpu-accelerated {
    transform: translateZ(0); /* Forcer GPU acceleration */
    will-change: transform;
}

/* Seletores otimizados para feedback visual */
.hover-active {
    /* Substituir seletores hover complexos */
}

/* Media queries eficientes */
@media (max-width: 768px) {
    /* Mobile optimizations */
    .timeline-wrapper {
        contain: layout style paint;
    }
}

/* Otimizações específicas para elementos da timeline */
.playhead {
    /* Seletores diretos e eficientes */
    will-change: transform;
    contain: layout style paint;
}

/* ===================================================================== */
/* MELHORIAS DE ACESSIBILIDADE E CONTRASTE - Timeline               */
/* ===================================================================== */

/* Melhor contraste para overlays em diferentes estados */
.overlay-segment {
    position: relative; /* Necessário para pseudo-elementos */
}

/* Background gradient removed - was causing visual discomfort */

/* Melhor contraste para tooltips em alto contraste */
@media (prefers-contrast: high) {
    .overlay-segment {
        border-width: 2px;
        opacity: 1 !important;
    }

    .marker-item {
        border-width: 2px;
        opacity: 1 !important;
    }

    .marker-item[title]:hover::after,
    .overlay-segment[title]:hover::after {
        background: var(--tooltip-bg-primary);
        color: var(--tooltip-text-primary);
        border: 2px solid var(--tooltip-border-primary);
        font-weight: bold;
    }
}

/* Melhorias para modo escuro */
@media (prefers-color-scheme: dark) {
    .overlay-segment {
        border-color: rgba(14, 99, 156, 0.6);
    }

    .overlay-segment.selected {
        border-color: rgba(14, 99, 156, 0.9);
    }
}

/* Estados de foco melhorados para acessibilidade */
.overlay-segment:focus-visible,
.marker-item:focus-visible {
    outline: 2px solid var(--accent-focus);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(14, 99, 156, 0.2);
}

/* Animações reduzidas para melhor performance */
@media (prefers-reduced-motion: reduce) {
    .overlay-segment,
    .marker-item,
    .playhead {
        transition: none;
        transform: none !important;
    }

    .overlay-segment:hover,
    .marker-item:hover {
        transform: none !important;
    }
}

/* Classes utilitárias para estados visuais consistentes */
.timeline-element-focused {
    outline: 2px solid var(--accent-focus);
    outline-offset: 2px;
}

.timeline-element-active {
    background: var(--accent-primary) !important;
    border-color: var(--accent-primary-active) !important;
    opacity: 1 !important;
}

.timeline-element-dragging {
    opacity: 0.85 !important;
    cursor: grabbing !important;
    box-shadow: 0 6px 16px rgba(14, 99, 156, 0.5) !important;
}

/* ===================================================================== */
/* FIM DO SISTEMA VISUAL CONSOLIDADO - AvaLIBRAS v2.0                   */
/* ===================================================================== */
